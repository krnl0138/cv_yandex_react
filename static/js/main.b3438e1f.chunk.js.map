{"version":3,"sources":["components/routes/routes.module.scss","components/burger-constructor/burger-constructor-middle/burger-constructor-middle.module.scss","components/modal-overlay/modal-overlay.module.scss","pages/page-not-found/page-not-found.module.scss","components/app-header/app-header.module.scss","components/order-view/order-view.module.scss","components/app-header/app-header.tsx","types/hooks.ts","utils/cookies.ts","utils/api-urls.ts","utils/helpers.ts","services/actions/ingredients.ts","services/actions/user.ts","services/actions/auth/user-data.ts","services/actions/cart.ts","services/actions/order-details.ts","services/actions/modals.ts","components/burger-constructor/burger-constructor-middle/burger-constructor-middle.tsx","components/burger-constructor/burger-constructor-bun/burger-constructor-bun.tsx","components/burger-constructor/burger-constructor.tsx","components/burger-ingredients/card/burger-ingredients-card.tsx","components/loader/loader.tsx","services/actions/ingredient-details.ts","components/burger-ingredients/burger-ingredients.tsx","components/order-details/order-details.tsx","components/ingredient-details/ingredient-details.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","pages/page-not-found/page-not-found.tsx","pages/login/login.tsx","services/actions/auth/login.ts","services/actions/forgot-password.ts","pages/forgot-password/forgot-password.tsx","services/actions/auth/password.ts","services/actions/auth/logout.ts","pages/profile/profile.tsx","pages/register/register.tsx","services/actions/auth/register.ts","pages/reset-password/reset-password.tsx","components/order-element/order-element.tsx","services/actions/socket.ts","pages/profile-orders/profile-orders.tsx","pages/feed/feed-order-numbers-overall/feed-order-numbers-overall.tsx","pages/feed/feed-order-numbers/feed-order-numbers.tsx","pages/feed/feed.tsx","components/order-view/order-view.tsx","components/protected-route.tsx","components/routes/routes.tsx","components/app/app.tsx","services/reducers/cart.ts","services/reducers/ingredients.ts","services/reducers/modals.ts","services/reducers/ingredient-details.ts","services/reducers/order-details.ts","services/reducers/forgot-password.ts","services/reducers/user.ts","services/reducers/socket.ts","services/reducers/index.ts","services/middlewares/socketMiddleware.ts","index.tsx","pages/profile/profile.module.scss","pages/profile-orders/profile-orders.module.scss","components/order-element/order-element.module.scss","pages/feed/feed.module.scss","components/burger-constructor/burger-constructor.module.scss","components/burger-ingredients/burger-ingredients.module.scss","pages/register/register.module.scss","components/ingredient-details/ingredient-details.module.scss","pages/login/login.module.scss","pages/reset-password/reset-password.module.scss","pages/feed/feed-order-numbers-overall/feed-order-numbers-overall.module.scss","pages/feed/feed-order-numbers/feed-order-numbers.module.scss","components/order-details/order-details.module.scss","pages/forgot-password/forgot-password.module.scss","components/burger-ingredients/card/burger-ingredients-card.module.scss","components/loader/loader.module.scss","components/modal/modal.module.scss"],"names":["module","exports","AppHeader","className","styles","header","nav","exact","to","pathname","activeClassName","activeLink","nav_element","link","type","app_header_button","center","nav_element_right","useSelector","selectorHook","useDispatch","dispatchHook","setCookie","name","value","props","exp","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","document","cookie","getCookie","matches","match","RegExp","replace","decodeURIComponent","undefined","WS_API_URL","WS_USER_ORDERS_URL","checkResponse","res","ok","json","Promise","reject","status","refreshToken","a","token","localStorage","getItem","options","method","headers","body","JSON","stringify","console","log","fetch","HTTPS_API_URL","data","accessToken","split","setItem","fetchWithRefresh","url","Authorization","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_REQUEST_SUCCESS","GET_INGREDIENTS_REQUEST_ERROR","USER_SET_CREDENTIALS","USER_LOGOUT","getUserData","dispatch","requestOptions","then","user","catch","e","error","ADD_CART_INGREDIENT","ADD_CART_INGREDIENT_BUN","DELETE_CART_INGREDIENT","MOVE_CART_INGREDIENT","CLEAR_CART_INGREDIENT","POST_ORDER_REQUEST","POST_ORDER_SUCCESS","POST_ORDER_FAILED","GET_ORDER_REQUEST","GET_ORDER_SUCCESS","GET_ORDER_FAILED","RESET_ORDER_NUMBER","VISIBLE_ORDER_DETAILS","VISIBLE_INGREDIENT_DETAILS","VISIBLE_ORDERS_DETAILS","BurgerConstructorMiddle","item","index","useDrag","collect","monitor","opacity","isDragging","dragRef","useDrop","accept","drop","ingredient","dropIndex","paddingLeft","isOver","dropRef","ref","style","text","price","thumbnail","image","handleClose","ingredientIndex","deleteIngredient","BurgerConstructorBun","bun","bunDropRef","isLocked","BurgerConstructor","history","useHistory","location","useLocation","store","cartIngredients","cart","сartIngredients","ingredientsIDs","map","_id","bunIngredients","orderCost","reduce","acc","ing","dropTarget","bunDropTop","bunDropBottom","main","constructor","middle","middleIngredients","orderSection","size","onClick","username","push","length","orderNumber","order","number","postOrder","state","from","Card","openDetails","buns","counter","filter","el","bunRef","card","count","src","alt","fontWeight","Loader","loader","SET_ACTIVE_INGREDIENT","BurgerIngredients","ingredients","ingredientsData","isLoading","refBun","useRef","refSauce","refMain","useState","current","setCurrent","handleScroll","scrollIntoView","behavior","ingredientsList","activeIngredient","background","ingredientsTypeBar","active","ingredientsTabs","onScroll","scrollTop","currentTarget","bunTop","getBoundingClientRect","top","sauceTop","mainTop","ingredientsTabsElement","OrderDetails","orderDetails","useEffect","icon","IngredientDetails","setIngredient","ingredientDetails","ingredientID","ingFound","find","mainImage","image_large","info","calories","proteins","fat","carbohydrates","ModalOverlay","onClose","modalOverlay","Modal","children","modalRoot","getElementById","closeModal","key","window","addEventListener","removeEventListener","ReactDOM","createPortal","modal","modalCloseIcon","PageNotFound","Login","email","password","form","setForm","onFormChange","formValue","formName","prev","onSubmit","preventDefault","login","placeholder","onChange","errorText","formChild","PASSWORD_FORGOT","PASSWORD_FORGOT_RESTORE","ForgotPassword","forgotPassword","logout","removeItem","Profile","mainRef","isFormClicked","setFormClicked","onClickLogout","useCallback","handleClick","contains","navChild","navParagraph","nativeEvent","submitter","outerText","patchUserData","Register","register","ResetPassword","isPasswordForgotten","resetPassword","OrderElement","ingredientsInOrder","setIngredientsInOrder","doneIngredients","setDoneIngredients","color","setStatus","matchOrderStatus","s","Error","matchedIngs","forEach","orderIng","matched","dataIng","content","row","moment","createdAt","calendar","icons","slice","iconNumber","image_mobile","ingIcons","WS_CONNECTION_START","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_GET_MESSAGE","wsActions","wsInit","wsSendMessage","onOpen","onError","onMessage","ProfileOrders","messages","ws","orders","setOrders","wsUrl","lastMessage","parsedMessage","parse","String","left","right","reverse","FeedOrderNumbersOverall","quantity","period","ordersToday","ordersTodayNumber","ordersAllTime","ordersAllTimeNumber","FeedOrderNumbers","ordersMarkup","ordersReady","wrapper","column","ind","ordersPrep","Feed","total","setTotal","totalToday","setTotalToday","doneOrders","setDoneNumbers","processOrders","setProcessNumbers","getJSXMarkup","orderNumbers","jsxMarkup","i","jsxOrderNumbersChunk","n","ordersDone","handleOrderNumbers","fn","orderNumbersByStatus","o","feedHeading","stats","ordersStats","OrderView","resultedOrder","setResultedOrder","doneWithIngredients","setDoneWithIngredients","orderIfNoProps","matchIngredientsFromOrder","getOrderNumberFromLocation","l","startsWith","opts","getOrder","Object","keys","mainModal","orderName","orderContent","orderIngredients","orderIngredientRow","ingIconSpan","ingIcon","ingName","ingValue","orderDate","orderValue","ProtectedRoute","rest","isUserLoaded","setUserLoaded","init","render","Routes","modals","visibleOrderDetails","payload","path","DndProvider","backend","HTML5Backend","App","initialState","hasError","visibleIngredientDetails","visibleOrdersDetails","wsConnected","enhancer","composeWithDevTools","applyMiddleware","logger","thunk","socket","next","action","WebSocket","onopen","event","onerror","onmessage","onclose","message","send","socketMiddleware","rootReducer","combineReducers","update","$splice","_","createStore","StrictMode"],"mappings":"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","file":"static/js/main.b3438e1f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"routes_main__2P4mw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"burger-constructor-middle_item__29c3C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalOverlay\":\"modal-overlay_modalOverlay__2mRqa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"page-not-found_main__2YHyb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__14Ifc\",\"nav\":\"app-header_nav__2K0EQ\",\"nav_element\":\"app-header_nav_element__2K7B_\",\"nav_element_left\":\"app-header_nav_element_left__1giBE\",\"nav_element_right\":\"app-header_nav_element_right__XYGN_\",\"center\":\"app-header_center__gAlLp\",\"link\":\"app-header_link__zAPNr\",\"activeLink\":\"app-header_activeLink__2BwNZ\",\"burger\":\"app-header_burger__2QbC0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"order-view_main__1ejcS\",\"mainModal\":\"order-view_mainModal__1miOG\",\"row\":\"order-view_row__IeGX7\",\"orderNumber\":\"order-view_orderNumber__WKeqt\",\"orderIngredients\":\"order-view_orderIngredients__3GmKU\",\"orderIngredientRow\":\"order-view_orderIngredientRow__qcHn4\",\"ingIcon\":\"order-view_ingIcon__177A7\",\"ingIconSpan\":\"order-view_ingIconSpan__1foWG\",\"ingValue\":\"order-view_ingValue__1kpxv\",\"orderValue\":\"order-view_orderValue__1R7kX\",\"statusDone\":\"order-view_statusDone__OhG6v\",\"statusCancelled\":\"order-view_statusCancelled__2RCM9\",\"statusInProcess\":\"order-view_statusInProcess__3GwxQ\"};","import styles from './app-header.module.scss';\nimport React from 'react';\nimport { Logo, BurgerIcon, ListIcon, ProfileIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { Link, NavLink } from 'react-router-dom';\n\nexport default function AppHeader(): JSX.Element {\n\n    return (\n        <header className={`${styles.header}\n                    text text_type_main-small text_color_inactive \n                    pt-2 pb-2 pl-8 pr-8`}>\n\n            <nav className={styles.nav}>\n\n                <NavLink\n                    exact to={{pathname: '/',}}\n                    activeClassName={styles.activeLink}\n                    className={`${styles.nav_element} pt-2 pb-2 pl-5 pr-5 ${styles.link}`}\n                >\n                    <BurgerIcon type=\"secondary\" />\n                    <p className={`${styles.app_header_button} ml-2`}>Конструктор</p>\n                </NavLink>\n\n                <NavLink\n                    exact to={{pathname: '/feed',}}\n                    activeClassName={styles.activeLink}\n                    className={`${styles.nav_element} pt-2 pb-2 pl-5 pr-5 ${styles.link}`}\n                >\n                    <ListIcon type=\"secondary\" />\n                    <p className={`${styles.app_header_button} ml-2`}>Лента заказов</p>\n                </NavLink>\n\n                <span className={styles.center}>\n                    <Link to={{ pathname: \"/\" }}>\n                        <Logo />\n                    </Link>\n                </span>\n\n                <div className={`${styles.nav_element} ${styles.nav_element_right} pt-2 pb-2 pl-5 pr-5`}>\n                    <ProfileIcon type=\"secondary\" />\n                    <NavLink\n                        to={{ pathname: '/profile' }}\n                        activeClassName={styles.activeLink}\n                        className={`text text_type_main-small text-color-inactive ml-2 ${styles.link}`}>\n                        Личный кабинет\n                    </NavLink>\n                </div>\n\n            </nav>\n        </header>\n    )\n}\n","import {\n    TypedUseSelectorHook,\n    useDispatch as dispatchHook,\n    useSelector as selectorHook\n} from 'react-redux';\nimport { AppDispatch, AppThunk, RootState } from '../services/reducers/index';\n\n// custom ts-oriented useSelector & useDispatch hooks\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;\nexport const useDispatch: () => AppThunk<void> = () => dispatchHook<AppDispatch | AppThunk>(); ","export function setCookie(\n  name: string,\n  value: string | number | boolean,\n  props?: {\n    expires?: string | number | Date;\n    [propName: string]: any;\n  }): void {\n  props = props || {};\n  let exp = props.expires;\n  if (typeof exp == 'number' && exp) {\n    const d = new Date();\n    d.setTime(d.getTime() + exp * 1000);\n    exp = props.expires = d;\n  }\n  if (exp instanceof Date && exp.toUTCString) {\n    props.expires = exp.toUTCString();\n  }\n  value = encodeURIComponent(value);\n  let updatedCookie = name + '=' + value;\n  for (const propName in props) {\n    updatedCookie += '; ' + propName;\n    const propValue = props[propName];\n    if (propValue !== true) {\n      updatedCookie += '=' + propValue;\n    }\n  }\n  document.cookie = updatedCookie;\n}\n\nexport function getCookie(name: string): string | undefined {\n  const matches = document.cookie.match(\n    new RegExp(\n      '(?:^|; )' +\n      // eslint-disable-next-line\n      name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') +\n      '=([^;]*)'\n    )\n  )\n  return matches ? decodeURIComponent(matches[1]) : undefined;\n}\n\nexport function deleteCookie(name: string): void {\n  setCookie(name, 0, { expires: -1 });\n}","import { getCookie } from \"./cookies\";\n\nconst HTTPS_API_URL = 'https://norma.nomoreparties.space/api';\nconst WS_API_URL = 'wss://norma.nomoreparties.space/orders';\n\nexport const REGISTER_POST_URL = HTTPS_API_URL + '/auth/register'; //POST\nexport const LOGIN_POST_URL = HTTPS_API_URL + '/auth/login'; //POST\nexport const LOGOUT_POST_URL = HTTPS_API_URL + '/auth/logout'; //POST\nexport const TOKEN_REFRESH_POST_URL = HTTPS_API_URL + '/auth/token'; //POST\nexport const GET_USER_DATA_URL = HTTPS_API_URL + '/auth/user'; //GET - эндпоинт получения данных о пользователе.\nexport const PATCH_USER_DATA_URL = HTTPS_API_URL + '/auth/user'; //PATCH - эндпоинт обновления данных о пользователе.\nexport const PASSWORD_FORGET_POST_URL = HTTPS_API_URL + '/password-reset'; // POST\nexport const PASSWORD_RESET_POST_URL = HTTPS_API_URL + '/password-reset'; // POST\n\nexport const GET_INGREDIENTS_URL = HTTPS_API_URL + '/ingredients';\nexport const POST_ORDER_URL = HTTPS_API_URL + '/orders';\nexport const GET_ORDER_URL = HTTPS_API_URL + '/orders';\n\nexport const WS_ALL_ORDERS_URL = WS_API_URL + '/all';\nexport const WS_USER_ORDERS_URL = WS_API_URL + '?token=' + getCookie('accessToken');","import { TOKEN_REFRESH_POST_URL } from './api-urls';\nimport { setCookie, getCookie } from './cookies';\nimport { TRequestOptions } from '../types/types';\n\nexport const checkResponse = (res: Response): Promise<any> => {\n    if (res.ok) {\n        return res.json();\n    }\n    return Promise.reject(`Error ${res.status}`);\n}\n\nexport const refreshToken = async (): Promise<void> => {\n    const token = localStorage.getItem('refreshToken');\n\n    const options = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ token: token }),\n    }\n\n    console.log('PROCEED TO REFRESH_TOKEN');\n\n    try {\n        const res = await fetch(TOKEN_REFRESH_POST_URL, options);\n        const data = await checkResponse(res);\n        setCookie('accessToken', data.accessToken.split('Bearer ')[1]);\n        localStorage.setItem('refreshToken', data.refreshToken);\n    } catch (e) {\n        console.log(e);\n    }\n}\n\nexport const fetchWithRefresh = async (url: string, options: TRequestOptions): Promise<any> => {\n    try {\n        const res = await fetch(url, options);\n        return await checkResponse(res);\n    }\n    catch (err) {\n        await refreshToken();\n        console.log('after refresh token')\n        const res = await fetch(url, {\n            method: options.method,\n            headers: {\n                'Content-Type': 'application/json',\n                Authorization: 'Bearer ' + getCookie('accessToken')\n            }\n        });\n        return await checkResponse(res);\n    }\n}","import { GET_INGREDIENTS_URL } from '../../utils/api-urls';\nimport { checkResponse } from '../../utils/helpers';\nimport { AppDispatch, AppThunk } from '../reducers';\nimport { TIngredient } from '../../types/types';\n\nexport const GET_INGREDIENTS_REQUEST = 'GET_INGREDIENTS_REQUEST' as const;\nexport const GET_INGREDIENTS_REQUEST_SUCCESS = 'GET_INGREDIENTS_REQUEST_SUCCESS' as const;\nexport const GET_INGREDIENTS_REQUEST_ERROR = 'GET_INGREDIENTS_REQUEST_ERROR' as const;\n\nexport interface IGetIngredientsRequest {\n  readonly type: typeof GET_INGREDIENTS_REQUEST;\n}\n\nexport interface IGetIngredientsRequestSuccess {\n  readonly type: typeof GET_INGREDIENTS_REQUEST_SUCCESS;\n  readonly payload: ReadonlyArray<TIngredient>;\n}\n\nexport interface IGetIngredientsRequestError {\n  readonly type: typeof GET_INGREDIENTS_REQUEST_ERROR;\n}\n\nexport type TIngredientsActions = IGetIngredientsRequest | IGetIngredientsRequestSuccess | IGetIngredientsRequestError;\n\nexport const getIngredients: AppThunk = () => {\n  return async (dispatch: AppDispatch) => {\n    dispatch({ type: GET_INGREDIENTS_REQUEST });\n\n    try {\n      const res = await fetch(GET_INGREDIENTS_URL);\n      const data = await checkResponse(res);\n      // console.log(data.data);\n      dispatch({ type: GET_INGREDIENTS_REQUEST_SUCCESS, payload: data.data })\n    } catch (e) {\n      dispatch({ type: GET_INGREDIENTS_REQUEST_ERROR });\n      console.log(e);\n    }\n  }\n};","export const USER_SET_CREDENTIALS = 'USER_SET_CREDENTIALS' as const;\nexport const USER_LOGOUT = 'USER_LOGOUT' as const;\n\nexport interface IUserSetCredentials {\n    readonly type: typeof USER_SET_CREDENTIALS;\n    readonly user: {\n        email: string;\n        name: string;\n    }\n}\nexport interface IUserLogout {\n    readonly type: typeof USER_LOGOUT;\n}\n\nexport type TUserActions = IUserSetCredentials | IUserLogout;","import { AppThunk, AppDispatch } from \"../../reducers\";\nimport { TFormData } from \"../../../types/types\";\nimport { GET_USER_DATA_URL, PATCH_USER_DATA_URL } from \"../../../utils/api-urls\";\nimport { getCookie } from \"../../../utils/cookies\";\nimport { fetchWithRefresh } from \"../../../utils/helpers\";\nimport { USER_SET_CREDENTIALS } from \"../user\";\n\nexport const GET_USER_DATA_REQUEST = 'GET_USER_DATA_REQUEST' as const;\nexport const GET_USER_DATA_REQUEST_SUCCESS = 'GET_USER_DATA_REQUEST_SUCCESS' as const;\nexport const GET_USER_DATA_REQUEST_FAILED = 'GET_USER_DATA_REQUEST_FAILED' as const;\n\nexport const PATCH_USER_DATA_REQUEST = 'PATCH_USER_DATA_REQUEST' as const;\nexport const PATCH_USER_DATA_REQUEST_SUCCESS = 'PATCH_USER_DATA_REQUEST_SUCCESS' as const;\nexport const PATCH_USER_DATA_REQUEST_FAILED = 'PATCH_USER_DATA_REQUEST_FAILED' as const;\n\ninterface IGetUserDataRequest {\n    readonly type: typeof GET_USER_DATA_REQUEST;\n}\ninterface IGetUserDataRequestSuccess {\n    readonly type: typeof GET_USER_DATA_REQUEST_SUCCESS;\n}\ninterface IGetUserDataRequestFailed {\n    readonly type: typeof GET_USER_DATA_REQUEST_FAILED;\n}\n\ninterface IPatchUserDataRequest {\n    readonly type: typeof PATCH_USER_DATA_REQUEST;\n}\ninterface IPatchUserDataRequestSuccess {\n    readonly type: typeof PATCH_USER_DATA_REQUEST_SUCCESS;\n}\ninterface IPatchUserDataRequestFailed {\n    readonly type: typeof PATCH_USER_DATA_REQUEST_FAILED;\n}\n\nexport type TUserDataActions = IGetUserDataRequest | IGetUserDataRequestSuccess | IGetUserDataRequestFailed | IPatchUserDataRequest | IPatchUserDataRequestSuccess | IPatchUserDataRequestFailed;\n\nexport const getUserData: AppThunk = () =>\n    async (dispatch: AppDispatch) => {\n        dispatch({ type: GET_USER_DATA_REQUEST });\n\n        const requestOptions = {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                Authorization: 'Bearer ' + getCookie('accessToken')\n            },\n        };\n\n        console.log('proceed to GET user info');\n        await fetchWithRefresh(GET_USER_DATA_URL, requestOptions)\n            .then(data => {\n                dispatch({ type: USER_SET_CREDENTIALS, user: data.user });\n                dispatch({ type: GET_USER_DATA_REQUEST_SUCCESS });\n            })\n            .catch(e => {\n                dispatch({ type: GET_USER_DATA_REQUEST_FAILED });\n                console.error(e);\n            })\n    }\n\nexport const patchUserData: AppThunk = ({ email, username, password }: TFormData) =>\n    async (dispatch: AppDispatch) => {\n        dispatch({ type: PATCH_USER_DATA_REQUEST });\n\n        const requestOptions = {\n            method: 'PATCH',\n            headers: {\n                'Content-Type': 'application/json',\n                Authorization: 'Bearer ' + getCookie('accessToken')\n            },\n            body: JSON.stringify({ name: username, email: email, password: password })\n        }\n\n        console.log('proceed to PATCH user info');\n        await fetchWithRefresh(PATCH_USER_DATA_URL, requestOptions)\n            .then(data => {\n                dispatch({ type: PATCH_USER_DATA_REQUEST_SUCCESS, user: data.user });\n            })\n            .catch(e => {\n                console.error(e);\n                dispatch({ type: PATCH_USER_DATA_REQUEST_FAILED });\n            }\n            );\n    }","import { TIngredient } from \"../../types/types\";\n\nexport const ADD_CART_INGREDIENT = 'ADD_CART_INGREDIENT' as const;\nexport const ADD_CART_INGREDIENT_BUN = 'ADD_CART_INGREDIENT_BUN' as const;\nexport const DELETE_CART_INGREDIENT = 'DELETE_CART_INGREDIENT' as const;\nexport const MOVE_CART_INGREDIENT = 'MOVE_CART_INGREDIENT' as const;\nexport const CLEAR_CART_INGREDIENT = 'CLEAR_CART_INGREDIENT' as const;\n\nexport interface IAddCartIngredient {\n    readonly type: typeof ADD_CART_INGREDIENT;\n    readonly ingredient: TIngredient;\n}\n\nexport interface IAddCartIngredientBun {\n    readonly type: typeof ADD_CART_INGREDIENT_BUN;\n    readonly ingredient: TIngredient;\n}\n\nexport interface IDeleteCartIngredient {\n    readonly type: typeof DELETE_CART_INGREDIENT;\n    readonly ingredientIndex: number;\n}\n\nexport interface IMoveCartIngredient {\n    readonly type: typeof MOVE_CART_INGREDIENT;\n    readonly ingredient: TIngredient & { item?: Record<string, never>, index?: number };\n    readonly dropIndex: number;\n}\n\nexport interface IClearCartIngredient {\n    readonly type: typeof CLEAR_CART_INGREDIENT;\n}\n\nexport type TCartActions = \n    IAddCartIngredient |\n    IAddCartIngredientBun |\n    IDeleteCartIngredient |\n    IMoveCartIngredient |\n    IClearCartIngredient;","import { POST_ORDER_URL, GET_ORDER_URL } from '../../utils/api-urls';\nimport { CLEAR_CART_INGREDIENT } from './cart';\n\nimport { getCookie } from '../../utils/cookies';\nimport { checkResponse } from '../../utils/helpers';\n\nimport { TIngredientsIDs, TOrder } from '../../types/types';\nimport { AppDispatch, AppThunk } from '../reducers';\n\nexport const POST_ORDER_REQUEST = 'POST_ORDER_REQUEST' as const;\nexport const POST_ORDER_SUCCESS = 'POST_ORDER_SUCCESS' as const;\nexport const POST_ORDER_FAILED = 'POST_ORDER_FAILED' as const;\nexport const GET_ORDER_REQUEST = 'GET_ORDER_REQUEST' as const;\nexport const GET_ORDER_SUCCESS = 'GET_ORDER_SUCCESS' as const;\nexport const GET_ORDER_FAILED = 'GET_ORDER_FAILED' as const ;\nexport const RESET_ORDER_NUMBER = 'RESET_ORDER_NUMBER' as const;\n\nexport interface IPostOrderRequest {\n  readonly type: typeof POST_ORDER_REQUEST;\n}\nexport interface IPostOrderRequestSuccess {\n  readonly type: typeof POST_ORDER_SUCCESS;\n  ingredientsIDs: Array<string>;\n  orderNumber: number;\n}\nexport interface IPostOrderRequestFailed {\n  readonly type: typeof POST_ORDER_FAILED;\n}\nexport interface IGetOrderRequest {\n  readonly type: typeof GET_ORDER_REQUEST;\n}\nexport interface IGetOrderRequestSuccess {\n  readonly type: typeof GET_ORDER_SUCCESS;\n  order: TOrder;\n}\nexport interface IGetOrderRequestFailed {\n  readonly type: typeof GET_ORDER_FAILED;\n}\nexport interface IResetOrderNumber {\n  readonly type: typeof RESET_ORDER_NUMBER;\n}\n\nexport type TOrderDetailsActions = \n  IPostOrderRequest |\n  IPostOrderRequestSuccess |\n  IPostOrderRequestFailed |\n  IGetOrderRequest |\n  IGetOrderRequestSuccess |\n  IGetOrderRequestFailed |\n  IResetOrderNumber;\n\nexport const postOrder: AppThunk = (ingredientsIDs: TIngredientsIDs) => {\n  return function (dispatch: AppDispatch) {\n    dispatch({ type: POST_ORDER_REQUEST });\n\n    fetch(POST_ORDER_URL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: 'Bearer ' + getCookie('accessToken')\n      },\n      body: JSON.stringify({ 'ingredients': ingredientsIDs })\n    })\n      .then(res => checkResponse(res))\n      .then(res => {\n        dispatch({ type: POST_ORDER_SUCCESS, orderNumber: res.order.number, ingredientsIDs: ingredientsIDs });\n        dispatch({ type: CLEAR_CART_INGREDIENT })\n      })\n      .catch(e => {\n        dispatch({ type: POST_ORDER_FAILED })\n        console.log(e);\n      });\n  }\n};\n\nexport const getOrder: AppThunk = (orderNumber: string) => {\n  return async function (dispatch: AppDispatch) {\n    dispatch({ type: GET_ORDER_REQUEST });\n\n    const opts = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      }\n    }\n\n    await fetch(`${GET_ORDER_URL}/${orderNumber}`, opts)\n      .then(res => checkResponse(res))\n      .then(data => {\n        dispatch({ type: GET_ORDER_SUCCESS, order: data.orders[0] });\n      })\n      .catch(e => {\n        dispatch({ type: POST_ORDER_FAILED })\n        console.log(e);\n      })\n  }\n}","export const VISIBLE_ORDER_DETAILS = 'VISIBLE_ORDER_DETAILS' as const;\r\nexport const VISIBLE_INGREDIENT_DETAILS = 'VISIBLE_INGREDIENT_DETAILS' as const;\r\nexport const VISIBLE_ORDERS_DETAILS = 'VISIBLE_ORDERS_DETAILS' as const;\r\n\r\nexport interface IVisibleOrderDetails {\r\n    readonly type: typeof VISIBLE_ORDER_DETAILS;\r\n    readonly value: boolean;\r\n}\r\nexport interface IVisibleIngredientDetails {\r\n    readonly type: typeof VISIBLE_INGREDIENT_DETAILS;\r\n    readonly value: boolean;\r\n}\r\nexport interface IVisibleOrdersDetails {\r\n    readonly type: typeof VISIBLE_ORDERS_DETAILS;\r\n    readonly value: boolean;\r\n}\r\n\r\nexport type TModalsActions = IVisibleOrderDetails | IVisibleIngredientDetails | IVisibleOrdersDetails;","import styles from './burger-constructor-middle.module.scss'\nimport React from 'react';\nimport { TIngredient } from '../../../types/types';\nimport { useDrag, useDrop } from 'react-dnd';\nimport { useDispatch } from '../../../types/hooks';\nimport { DELETE_CART_INGREDIENT, MOVE_CART_INGREDIENT } from '../../../services/actions/cart';\nimport { ConstructorElement, DragIcon } from '@ya.praktikum/react-developer-burger-ui-components';\n\ninterface IBurgerConstructorMiddleProps {\n    item: TIngredient;\n    index: number;\n}\n\nexport function BurgerConstructorMiddle({ item, index }: IBurgerConstructorMiddleProps): JSX.Element {\n    const dispatch = useDispatch();\n\n    const [{ opacity }, dragRef] = useDrag({\n        type: 'move',\n        item: () => {\n            return { item, index };\n        },\n        collect: monitor => ({\n            opacity: monitor.isDragging() ? 0.5 : 1\n        })\n    })\n\n    const [{ paddingLeft }, dropRef] = useDrop({\n        accept: 'move',\n        drop(ingredient) {\n            dispatch({ type: MOVE_CART_INGREDIENT, ingredient, dropIndex: index })\n        },\n        collect: monitor => ({\n            paddingLeft: monitor.isOver() ? 30 : 0\n        })\n    });\n\n    const deleteIngredient = (index: number) => {\n        dispatch({ type: DELETE_CART_INGREDIENT, ingredientIndex: index })\n    }\n\n    return (\n        <div ref={dragRef} style={{ opacity }}>\n            <div ref={dropRef} style={{ paddingLeft }}>\n                <span className={`${styles.item} ml-2 mr-6 mt-2 mb-2`}>\n                    <DragIcon type='primary' />\n                    <ConstructorElement\n                        text={item.name}\n                        price={item.price}\n                        thumbnail={item.image}\n                        handleClose={() => deleteIngredient(index)}\n                    />\n                </span>\n            </div>\n        </div>\n    )\n}","import styles from './burger-constructor-bun.module.scss';\nimport { ConstructorElement } from '@ya.praktikum/react-developer-burger-ui-components';\nimport React from 'react';\nimport { ConnectDropTarget } from 'react-dnd';\nimport { TIngredient } from '../../../types/types';\n\ninterface IBurgerConstructorBunProps {\n    bun: TIngredient;\n    type: 'top' | 'bottom';\n    bunDropRef: ConnectDropTarget;\n}\n\nexport function BurgerConstructorBun({ bun, type, bunDropRef }: IBurgerConstructorBunProps): JSX.Element {\n\n    if (!bun) {\n        return (\n            <div ref={bunDropRef} className='ml-8 mr-8'>\n                <ConstructorElement\n                    type={type}\n                    isLocked={true}\n                    text=''\n                    thumbnail='https://cdn-icons-png.flaticon.com/128/1/1601.png' // ? cannot be removed due to TS type\n                    price={0}\n                />\n            </div>\n        )\n    }\n\n    return (\n        <div ref={bunDropRef} className={styles.bun} >\n            <ConstructorElement\n                type={type}\n                isLocked={true}\n                text={`${bun.name} ${type === 'top' ? '(верх)' : '(низ)'}`}\n                thumbnail={bun.image}\n                price={bun.price}\n            />\n        </div>\n    )\n}","import styles from './burger-constructor.module.scss';\nimport React from 'react';\nimport { CurrencyIcon, Button } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { useSelector, useDispatch } from '../../types/hooks';\nimport { useDrop } from 'react-dnd';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { postOrder } from '../../services/actions/order-details';\nimport { VISIBLE_ORDER_DETAILS } from '../../services/actions/modals';\nimport { ADD_CART_INGREDIENT, ADD_CART_INGREDIENT_BUN } from '../../services/actions/cart';\nimport { BurgerConstructorMiddle } from './burger-constructor-middle/burger-constructor-middle';\nimport { BurgerConstructorBun } from './burger-constructor-bun/burger-constructor-bun';\n\nexport default function BurgerConstructor(): JSX.Element {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const location = useLocation();\n  const user = useSelector(store => store.user);\n  const cartIngredients = useSelector(store => store.cart.сartIngredients);\n  const ingredientsIDs = cartIngredients.map(item => item._id);\n  const bun = useSelector(store => store.cart.bunIngredients[0]);\n\n  const orderCost = bun\n    ? [bun, bun, ...cartIngredients].reduce((acc, ing) => acc += ing.price, 0)\n    : cartIngredients.reduce((acc, ing) => acc += ing.price, 0);\n\n\n  const orderBurger = () => {\n    if (!user.username) {\n      return history.push({ pathname: '/login' });\n    }\n\n    if (bun && cartIngredients.length !== 0) {\n      dispatch({ type: VISIBLE_ORDER_DETAILS, value: true })\n      dispatch(postOrder(ingredientsIDs));\n      history.replace({ pathname: '/', state: { from: location.pathname } });\n    }\n  }\n\n  const [, dropTarget] = useDrop({\n    accept: 'ingredient',\n    drop(ingredient) {\n      dispatch({ type: ADD_CART_INGREDIENT, ingredient })\n    }\n  });\n\n  const [, bunDropTop] = useDrop({\n    accept: 'bun',\n    drop(ingredient) {\n      dispatch({ type: ADD_CART_INGREDIENT_BUN, ingredient })\n    }\n  });\n\n  const [, bunDropBottom] = useDrop({\n    accept: 'bun',\n    drop(ingredient) {\n      dispatch({ type: ADD_CART_INGREDIENT_BUN, ingredient })\n    }\n  });\n\n  return (\n    <section className={`${styles.main} mt-25 mr-10`}>\n\n      <div className={`${styles.constructor} mb-4`} >\n        <BurgerConstructorBun bun={bun} type='top' bunDropRef={bunDropTop}/>\n\n        <div className={styles.middle} ref={dropTarget} >\n          {cartIngredients.map((ingredient, index) => {\n            return (\n              <div className={styles.middleIngredients} key={`${ingredient._id}${index}`} >\n                <BurgerConstructorMiddle item={ingredient} index={index} />\n              </div>\n            )\n          })\n          }\n        </div>\n\n        <BurgerConstructorBun bun={bun} type='bottom' bunDropRef={bunDropBottom}/>\n      </div>\n\n      <div className={styles.orderSection}>\n        <span className={`${styles.price} m-5`}>\n          <p className='text text_type_digits-medium mr-2'>{orderCost}</p>\n          <CurrencyIcon type='primary' />\n        </span>\n        <Button type='primary'\n          size='medium'\n          onClick={orderBurger}>\n          Оформить заказ\n        </Button>\n      </div>\n\n    </section>\n  )\n}","import styles from './burger-ingredients-card.module.scss';\nimport React from 'react';\nimport { Counter, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { useSelector } from '../../../types/hooks';\nimport { useDrag } from \"react-dnd\";\nimport { TIngredient } from '../../../types/types';\n\ntype TCardProps = {\n  item: TIngredient;\n  openDetails: () => void;\n}\n\nexport default function Card({ item, openDetails }: TCardProps): JSX.Element {\n  const cartIngredients = useSelector(store => store.cart.сartIngredients);\n  const buns = useSelector(store => store.cart.bunIngredients);\n  const counter = [...cartIngredients, ...buns].filter(el => el._id === item._id).length;\n\n  const [{ opacity }, ref] = useDrag({\n    type: 'ingredient',\n    item: item,\n    collect: monitor => ({\n      opacity: monitor.isDragging() ? 0.5 : 1\n    })\n  });\n\n  const [, bunRef] = useDrag({\n    type: 'bun',\n    item: item\n  });\n\n  return (\n    <div ref={item.type === 'bun' ? bunRef : ref}\n      className={`${styles.card} pl-2 pr-2`}\n      onClick={openDetails}\n      key={item._id}\n      style={{ opacity }}\n    >\n\n      {\n        counter > 0 &&\n          (< Counter count={item.type === 'bun' ? counter + 1 : counter} size=\"default\" />)\n      }\n\n      <img className=\"p-2 pb-4\" src={item.image} alt={item.name} />\n      <span className={styles.price}>\n        <p className=\"text text_type_digits-default mr-2\">{item.price}</p>\n        <CurrencyIcon type=\"primary\" />\n      </span>\n      <p className=\"text text_type_main-default pb-5 pt-5\" style={{ fontWeight: 700 }}>{item.name}</p>\n    </div>\n  )\n}","import styles from './loader.module.scss'\nimport React from 'react';\n\nexport default function Loader(): JSX.Element {\n  return (\n    <div className={styles.main}>\n      <div className={styles.loader}></div>\n    </div>\n  )\n}","import { TIngredient } from \"../../types/types\";\n\nexport const SET_ACTIVE_INGREDIENT = 'SET_ACTIVE_INGREDIENT' as const;\n\nexport interface ISetActiveIngredient {\n    readonly type: typeof SET_ACTIVE_INGREDIENT;\n    readonly activeIngredient: TIngredient;\n}\n\nexport type TIngredientDetailsActions = ISetActiveIngredient;","import styles from './burger-ingredients.module.scss';\nimport React, { useState, useRef } from 'react';\nimport { useSelector, useDispatch } from '../../types/hooks';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\nimport Card from './card/burger-ingredients-card';\nimport Loader from '../loader/loader';\nimport { SET_ACTIVE_INGREDIENT } from '../../services/actions/ingredient-details';\nimport { VISIBLE_INGREDIENT_DETAILS } from '../../services/actions/modals';\n\n\nexport default function BurgerIngredients(): JSX.Element {\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const location = useLocation();\n\n    const { ingredientsData, isLoading } = useSelector(store=> store.ingredients);\n\n    const refBun = useRef<HTMLParagraphElement>(null);\n    const refSauce = useRef<HTMLParagraphElement>(null);\n    const refMain = useRef<HTMLParagraphElement>(null);\n\n    const [current, setCurrent] = useState<string>('bun')\n    const handleScroll = (e: string) => {\n        setCurrent(e);\n        if (e === \"bun\") refBun.current?.scrollIntoView({ behavior: 'smooth' });\n        if (e === \"sauce\") refSauce.current?.scrollIntoView({ behavior: 'smooth' });\n        if (e === \"main\") refMain.current?.scrollIntoView({ behavior: 'smooth' });\n    }\n\n    const handleActiveTab = (e: React.SyntheticEvent<HTMLDivElement>) => {\n        const scrollTop = e.currentTarget.scrollTop;\n\n        const bunTop = refBun.current?.getBoundingClientRect().top as number;\n        const sauceTop = refSauce.current?.getBoundingClientRect().top as number;\n        const mainTop = refMain.current?.getBoundingClientRect().top as number;\n\n        if (scrollTop < bunTop) setCurrent('bun');\n        if (scrollTop > bunTop && scrollTop < sauceTop) setCurrent('sauce');\n        if (scrollTop > mainTop) setCurrent('main');\n    }\n\n    const ingredientsList = (type: 'bun' | 'sauce' | 'main') => {\n        return ingredientsData\n            .filter(ingredient => ingredient.type === type)\n            .map((ingredient, index) => {\n                const openDetails = () => {\n                    dispatch({ type: SET_ACTIVE_INGREDIENT, activeIngredient: ingredient })\n                    dispatch({ type: VISIBLE_INGREDIENT_DETAILS, value: true })\n                    history.push({ pathname: `/ingredients/${ingredient._id}`, state: { background: location } })\n                }\n\n                return (<Card item={ingredient} openDetails={openDetails} key={index} />)\n            });\n    };\n\n    return (\n        isLoading ? (\n            <Loader />\n        ) : (\n            <section className={`${styles.main} mr-10 ml-10`}>\n\n                <h2 className='text text_type_main-large mt-10 mb-5'>Соберите бургер</h2>\n\n                <div className={`${styles.ingredientsTypeBar} mb-10`} >\n                    <Tab value=\"bun\" active={current === 'bun'} onClick={handleScroll}>Булки</Tab>\n                    <Tab value=\"sauce\" active={current === 'sauce'} onClick={handleScroll}>Соусы</Tab>\n                    <Tab value=\"main\" active={current === 'main'} onClick={handleScroll}>Начинки</Tab>\n                </div>\n\n                <div className={styles.ingredientsTabs} onScroll={handleActiveTab} >\n                    <p className='text text_type_main-medium mb-5' ref={refBun} >Булки</p>\n                    <div className={styles.ingredientsTabsElement} > {ingredientsList('bun')} </div>\n\n                    <p className='text text_type_main-medium mb-5 mt-10' ref={refSauce} >Соусы</p>\n                    <div className={styles.ingredientsTabsElement} > {ingredientsList('sauce')} </div>\n\n                    <p className='text text_type_main-medium mb-5 mt-10' ref={refMain} >Начинка</p>\n                    <div className={styles.ingredientsTabsElement} > {ingredientsList('main')} </div>\n                </div>\n\n            </section>\n        )\n    )\n}\n","import styles from './order-details.module.scss';\nimport { useEffect } from 'react';\nimport { useSelector, useDispatch } from '../../types/hooks';\nimport { CheckMarkIcon } from '@ya.praktikum/react-developer-burger-ui-components'\nimport Loader from '../loader/loader';\nimport React from 'react';\nimport { RESET_ORDER_NUMBER } from '../../services/actions/order-details';\n\nexport default function OrderDetails(): JSX.Element {\n    const dispatch = useDispatch();\n    const { orderNumber } = useSelector(store => store.orderDetails);\n\n    useEffect(() => {\n        return () => { dispatch({ type: RESET_ORDER_NUMBER }) }\n    },[dispatch])\n\n    return (\n        !orderNumber\n            ? (<Loader />)\n            : (\n                <div className={`${styles.card}`}>\n                    <h3 className={`${styles.order} pt-3 text text_type_digits-large`}>{orderNumber}</h3>\n                    <p className='text text_type_main-medium pt-1'>Идентификатор заказа</p>\n                    <span className={`${styles.icon} mt-20 mb-20`}><CheckMarkIcon type='primary'/></span>\n                    <p className='text text_type_main-default'>Ваш заказ начали готовить</p>\n                    <p className='text text_type_main-default text_color_inactive pb-10 pt-2'>Дождитесь готовности на орбитальной станции</p>\n                </div>\n            )\n    )\n}","import styles from './ingredient-details.module.scss';\nimport { useSelector } from '../../types/hooks';\nimport { useLocation } from 'react-router-dom';\nimport React, { useEffect, useState } from 'react';\nimport Loader from '../loader/loader';\nimport { TIngredient } from '../../types/types';\n\nexport default function IngredientDetails(): JSX.Element {\n    const location = useLocation();\n    const [ingredient, setIngredient] = useState<TIngredient>();\n    const { ingredientsData, isLoading } = useSelector(store => store.ingredients);\n    const activeIngredient = useSelector(store => store.ingredientDetails.activeIngredient);\n    \n    useEffect(() => {\n        const ingredientID = location.pathname.split('/')[2];\n\n        if (activeIngredient === null) {\n            const ingFound = ingredientsData.find(ing => ing._id === ingredientID);\n            if (ingFound) {\n                return setIngredient(ingFound);\n            }\n        }\n        if (activeIngredient !== null) {\n            setIngredient(activeIngredient);\n        }\n    }, [ingredientsData, activeIngredient, location.pathname]);\n\n    return (\n        isLoading\n            ? (<Loader />)\n            : (\n                <div className={`${styles.card}`}>\n                    <h3 className={`mt-5 text text_type_main-large`}>Детали ингредиента</h3>\n                    <img className={`${styles.mainImage} mt-10`} src={ingredient?.image_large} alt={ingredient?.name} />\n                    <p className={`${styles.name} pt-4 pb-6 text text_type_main-medium`}>\n                        {ingredient?.name}\n                    </p>\n                    <ul className={styles.info}>\n                        <li>\n                            <p className='text text_type_main-default text_color_inactive mb-2'>Калории, ккал</p>\n                            <p className='text text_type_digits-default text_color_inactive'>{ingredient?.calories}</p>\n                        </li>\n                        <li>\n                            <p className='text text_type_main-default text_color_inactive mb-2'>Белки, г</p>\n                            <p className='text text_type_digits-default text_color_inactive'>{ingredient?.proteins}</p>\n                        </li>\n                        <li>\n                            <p className='text text_type_main-default text_color_inactive mb-2'>Жиры, г</p>\n                            <p className='text text_type_digits-default text_color_inactive'>{ingredient?.fat}</p>\n                        </li>\n                        <li>\n                            <p className='text text_type_main-default text_color_inactive mb-2'>Углеводы, г</p>\n                            <p className='text text_type_digits-default text_color_inactive'>{ingredient?.carbohydrates}</p>\n                        </li>\n                    </ul>\n                </div>\n            )\n    )\n}","import styles from './modal-overlay.module.scss'\nimport React from 'react';\n\ninterface IModalOverlay {\n    onClose: () => void\n}\n\nexport default function ModalOverlay({ onClose }: IModalOverlay): JSX.Element {\n    return (\n        <div className={styles.modalOverlay} onClick={onClose}></div>\n    )\n}","import ReactDOM from \"react-dom\";\nimport React, { ReactNode, useEffect } from 'react';\nimport styles from \"./modal.module.scss\";\nimport ModalOverlay from \"../modal-overlay/modal-overlay\";\nimport { CloseIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\n\ninterface IModalProps {\n    onClose: () => void;\n    children: ReactNode;\n}\n\nexport default function Modal({ children, onClose }: IModalProps): JSX.Element {\n    const modalRoot = document.getElementById(\"react-modals\") as HTMLElement;\n\n    useEffect(() => {\n        const closeModal = (e: KeyboardEvent) => {\n            if (e.key === 'Escape') { onClose() }\n        }\n\n        window.addEventListener('keydown', closeModal)\n        return () => window.removeEventListener('keydown', closeModal)\n    }, [onClose])\n\n    return ReactDOM.createPortal(\n        <>\n            <ModalOverlay onClose={onClose} />\n            <div className={styles.modal}>\n                <span onClick={onClose} className={styles.modalCloseIcon}>\n                    <CloseIcon type=\"primary\" />\n                </span>\n                {children}\n            </div>\n        </>, modalRoot\n    );\n}","import React from 'react';\nimport styles from './page-not-found.module.scss';\n\nexport default function PageNotFound(): JSX.Element {\n\n    return (\n        <p className={`text text_type_main-large ${styles.main}`}>\n            404\n        </p>\n    )\n}","import styles from './login.module.scss';\nimport { Button, Input, PasswordInput, } from '@ya.praktikum/react-developer-burger-ui-components'\nimport { Link, Redirect, useHistory } from 'react-router-dom';\nimport React, { useState } from 'react';\nimport { useSelector, useDispatch } from '../../types/hooks';\nimport { login } from '../../services/actions/auth/login';\n\nexport default function Login(): JSX.Element {\n    const history = useHistory();\n    const dispatch = useDispatch();\n    const user = useSelector(store => store.user);\n\n    const [form, setForm] = useState({\n        email: '',\n        password: ''\n    });\n\n    const onFormChange = (e: React.FormEvent<HTMLInputElement>) => {\n        const formValue = e.currentTarget.value;\n        const formName = e.currentTarget.name;\n        setForm(prev => ({...prev, [formName]: formValue }))\n    };\n\n    const onFormSubmit = (e: React.SyntheticEvent) => {\n        e.preventDefault();\n        dispatch(login(form));\n        history.replace({ pathname: '/' });\n    }\n\n    if (user.username) {\n        return (\n            <Redirect to={{ pathname: '/' }} />\n        )\n    }\n\n    return (\n        <div className={styles.main}>\n\n            <p className=\"text text_type_main-large\">\n                Вход\n            </p>\n\n\n            <form onSubmit={onFormSubmit} className={styles.form}>\n                <Input\n                    type={'text'}\n                    placeholder={'E-mail'}\n                    onChange={onFormChange}\n                    value={form.email}\n                    name={'email'}\n                    error={false}\n                    errorText={'Ошибка'}\n                    size={'default'}\n                />\n\n                <div className={styles.formChild}>\n                    <PasswordInput\n                        onChange={onFormChange}\n                        value={form.password}\n                        name={'password'}\n                    />\n\n                </div>\n\n                <div className={styles.formChild}>\n                    <Button\n                        type=\"primary\"\n                        size=\"large\"\n                    >\n                        Войти\n                    </Button>\n                </div>\n\n            </form>\n\n            <p className=\"text text_type_main-default text_color_inactive\">\n                Вы — новый пользователь? <Link to={{ pathname: '/register' }}>Зарегистрироваться</Link>\n            </p>\n\n            <p className=\"text text_type_main-default text_color_inactive\">\n                Забыли пароль? <Link to={{ pathname: '/forgot-password' }}>Восстановить пароль</Link>\n            </p>\n        </div>\n    )\n}","import { TFormData } from \"../../../types/types\";\nimport { LOGIN_POST_URL } from \"../../../utils/api-urls\";\nimport { setCookie } from \"../../../utils/cookies\";\nimport { checkResponse } from \"../../../utils/helpers\";\nimport { AppThunk, AppDispatch } from \"../../reducers\";\nimport { USER_SET_CREDENTIALS } from \"../user\";\n\nexport const LOGIN_REQUEST = 'LOGIN_REQUEST' as const;\nexport const LOGIN_REQUEST_SUCCESS = 'LOGIN_REQUEST_SUCCESS' as const;\nexport const LOGIN_REQUEST_FAILED = 'LOGIN_REQUEST_FAILED' as const;\n\ninterface ILoginRequest {\n    readonly type: typeof LOGIN_REQUEST;\n}\ninterface ILoginRequestSuccess {\n    readonly type: typeof LOGIN_REQUEST_SUCCESS;\n}\ninterface ILoginRequestFailed {\n    readonly type: typeof LOGIN_REQUEST_FAILED;\n}\n\nexport type TLoginActions = ILoginRequest | ILoginRequestSuccess | ILoginRequestFailed;\n\nexport const login: AppThunk = ({ email, password }: TFormData) => {\n    return async (dispatch: AppDispatch) => {\n        dispatch({ type: LOGIN_REQUEST })\n\n        const requestOptions = {\n            method: 'POST',\n            body: JSON.stringify({ email: email, password: password }),\n            headers: { 'Content-Type': 'application/json' }\n        }\n\n        console.log('proceed to LOGIN');\n        await fetch(LOGIN_POST_URL, requestOptions)\n            .then(res => checkResponse(res))\n            .then(data => {\n                setCookie('accessToken', data.accessToken.split('Bearer ')[1]);\n                localStorage.setItem('refreshToken', data.refreshToken);\n                dispatch({ type: USER_SET_CREDENTIALS, user: data.user });\n                dispatch({ type: LOGIN_REQUEST_SUCCESS });\n            })\n            .catch(e => {\n                console.error(e);\n                dispatch({ type: LOGIN_REQUEST_FAILED })\n            });\n        }\n    }","export const PASSWORD_FORGOT = 'PASSWORD_FORGOT' as const;\nexport const PASSWORD_FORGOT_RESTORE = 'PASSWORD_FORGOT_RESTORE' as const;\n\nexport interface IPasswordForgot {\n    readonly type: typeof PASSWORD_FORGOT;\n}\n\nexport interface IPasswordForgotRestore {\n    readonly type: typeof PASSWORD_FORGOT_RESTORE;\n}\n\nexport type TForgotPasswordActions = IPasswordForgot | IPasswordForgotRestore;","import { Button, Input } from '@ya.praktikum/react-developer-burger-ui-components'\nimport styles from './forgot-password.module.scss';\nimport React, { useState } from 'react';\nimport { useHistory, Link, Redirect } from 'react-router-dom';\nimport { useSelector, useDispatch } from '../../types/hooks';\nimport { forgotPassword } from '../../services/actions/auth/password';\nimport { PASSWORD_FORGOT } from '../../services/actions/forgot-password';\n\nexport default function ForgotPassword(): JSX.Element {\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const user = useSelector(store => store.user);\n\n    const [form, setForm] = useState({ email: '' });\n\n    const onFormChange = (e: React.FormEvent<HTMLInputElement>) => {\n        const formValue = e.currentTarget.value;\n        const formName = e.currentTarget.name;\n        setForm(prev => ({...prev, [formName]: formValue }))\n    }\n\n    const onFormSubmit = (e: React.SyntheticEvent) => {\n        e.preventDefault();\n        dispatch({ type: PASSWORD_FORGOT });\n        dispatch(forgotPassword(form));\n        history.replace({ pathname: '/reset-password' });\n    }\n\n    if (user.username) {\n        return (\n            <Redirect to={{ pathname: '/' }} />\n        )\n    }\n\n    return (\n        <div className={styles.main}>\n            <p className=\"text text_type_main-large\">\n                Восстановление пароля\n            </p>\n\n            <form onSubmit={onFormSubmit} className={styles.form}>\n                <Input\n                    type={'text'}\n                    placeholder={'Укажите e-mail'}\n                    onChange={onFormChange}\n                    value={form.email}\n                    name={'email'}\n                    error={false}\n                    errorText={'Ошибка'}\n                    size={'default'}\n                />\n\n                <div className={styles.formChild}>\n                    <Button\n                        type=\"primary\"\n                        size=\"large\"\n                    >\n                        Восстановить\n                    </Button>\n                </div>\n\n            </form>\n\n            <p className=\"text text_type_main-default text_color_inactive\">\n                Вспомнили пароль? <Link to={{ pathname: '/login' }}>Войти</Link>\n            </p>\n        </div>\n    )\n}","import { AppDispatch, AppThunk } from \"../../reducers\";\nimport { TFormData } from \"../../../types/types\";\nimport { checkResponse } from \"../../../utils/helpers\";\nimport { PASSWORD_FORGET_POST_URL, PASSWORD_RESET_POST_URL } from \"../../../utils/api-urls\";\n\nexport const FORGOT_PASSWORD_REQUEST = 'FORGOT_PASSWORD_REQUEST' as const;\nexport const FORGOT_PASSWORD_REQUEST_SUCCESS = 'FORGOT_PASSWORD_REQUEST_SUCCESS' as const;\nexport const FORGOT_PASSWORD_REQUEST_FAILED = 'FORGOT_PASSWORD_REQUEST_FAILED' as const;\n\nexport const RESET_PASSWORD_REQUEST = 'RESET_PASSWORD_REQUEST' as const;\nexport const RESET_PASSWORD_REQUEST_SUCCESS = 'RESET_PASSWORD_REQUEST_SUCCESS' as const;\nexport const RESET_PASSWORD_REQUEST_FAILED = 'RESET_PASSWORD_REQUEST_FAILED' as const;\n\ninterface IForgotPasswordRequest {\n    readonly type: typeof FORGOT_PASSWORD_REQUEST;\n}\ninterface IForgotPasswordRequestSuccess {\n    readonly type: typeof FORGOT_PASSWORD_REQUEST_SUCCESS;\n}\ninterface IForgotPasswordRequestFailed {\n    readonly type: typeof FORGOT_PASSWORD_REQUEST_FAILED;\n}\n\ninterface IResetPasswordRequest {\n    readonly type: typeof RESET_PASSWORD_REQUEST;\n}\ninterface IResetPasswordRequestSuccess {\n    readonly type: typeof RESET_PASSWORD_REQUEST_SUCCESS;\n}\ninterface IResetPasswordRequestFailed {\n    readonly type: typeof RESET_PASSWORD_REQUEST_FAILED;\n}\n\nexport type TPasswordActions = IForgotPasswordRequest | IForgotPasswordRequestSuccess | IForgotPasswordRequestFailed | IResetPasswordRequest | IResetPasswordRequestSuccess | IResetPasswordRequestFailed;\n\nexport const forgotPassword: AppThunk = ({ email }: TFormData) =>\n    async (dispatch: AppDispatch) => {\n        dispatch({ type: FORGOT_PASSWORD_REQUEST })\n\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ email: email })\n        };\n\n        console.log('proceed to password forgot request');\n        await fetch(PASSWORD_FORGET_POST_URL, requestOptions)\n            .then(res => checkResponse(res))\n            .then(data => {\n                console.log(data);\n                dispatch({ type: FORGOT_PASSWORD_REQUEST_SUCCESS })\n\n            })\n            .catch(e => {\n                console.log(e);\n                dispatch({ type: FORGOT_PASSWORD_REQUEST_FAILED })\n            })\n    }\n\nexport const resetPassword: AppThunk = ({ password, token }: TFormData) =>\n    async (dispatch: AppDispatch) => {\n        dispatch({ type: RESET_PASSWORD_REQUEST });\n\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ password: password, token: token })\n        }\n\n        console.log('proceed to password reset request');\n        await fetch(PASSWORD_RESET_POST_URL, requestOptions)\n            .then(res => checkResponse(res))\n            .then(data => {\n                console.log(data);\n                dispatch({ type: RESET_PASSWORD_REQUEST_SUCCESS });\n\n            })\n            .catch(e => {\n                console.error(e);\n                dispatch({ type: RESET_PASSWORD_REQUEST_FAILED });\n            })\n    }","import { AppThunk, AppDispatch } from \"../../reducers\";\nimport { LOGOUT_POST_URL } from \"../../../utils/api-urls\";\nimport { deleteCookie } from \"../../../utils/cookies\";\nimport { checkResponse } from \"../../../utils/helpers\";\nimport { USER_LOGOUT } from \"../user\";\n\nexport const LOGOUT_REQUEST = 'LOGOUT_REQUEST' as const;\nexport const LOGOUT_REQUEST_SUCCESS = 'LOGOUT_REQUEST_SUCCESS' as const;\nexport const LOGOUT_REQUEST_FAILED = 'LOGOUT_REQUEST_FAILED' as const;\n\ninterface ILogoutRequest {\n    readonly type: typeof LOGOUT_REQUEST;\n}\ninterface ILogoutRequestSuccess {\n    readonly type: typeof LOGOUT_REQUEST_SUCCESS;\n}\ninterface ILogoutRequestFailed {\n    readonly type: typeof LOGOUT_REQUEST_FAILED;\n}\n\nexport type TLogoutActions = ILogoutRequest | ILogoutRequestSuccess | ILogoutRequestFailed;\n\nexport const logout: AppThunk = () =>\n    async (dispatch: AppDispatch) => {\n        dispatch({ type: LOGOUT_REQUEST });\n\n        const requestOptions = {\n            method: 'POST',\n            body: JSON.stringify({ token: localStorage.getItem('refreshToken') }),\n            headers: { 'Content-Type': 'application/json' }\n        };\n\n        console.log('proceed to LOGOUT');\n        await fetch(LOGOUT_POST_URL, requestOptions)\n            .then(res => checkResponse(res))\n            .then(() => {\n                dispatch({ type: USER_LOGOUT });\n                deleteCookie('accessToken');\n                localStorage.removeItem('refreshToken');\n                dispatch({ type: LOGOUT_REQUEST_SUCCESS })\n            })\n            .catch(e => {\n                console.error(e);\n                dispatch({ type: LOGOUT_REQUEST_FAILED })\n            });\n    }","import styles from './profile.module.scss';\nimport React, { useEffect, useState, useRef, useCallback } from 'react';\nimport { Link, NavLink } from 'react-router-dom';\nimport { useSelector, useDispatch } from '../../types/hooks';\nimport { Button, Input, PasswordInput } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { patchUserData } from '../../services/actions/auth/user-data';\nimport { logout } from '../../services/actions/auth/logout';\n\nexport default function Profile(): JSX.Element {\n    const dispatch = useDispatch();\n    const user = useSelector(store => store.user);\n    const [form, setForm] = useState({ username: user.username, email: user.email, password: '' });\n    const mainRef = useRef<HTMLDivElement>(null);\n    const [isFormClicked, setFormClicked] = useState(false);\n\n    const resetProfileFormValue = () => {\n        setForm(prev => ({ ...prev, username: user.username, email: user.email, password: '' }));\n    }\n\n    const onClickLogout = useCallback(() => {\n        dispatch(logout());\n    }, [dispatch]);\n\n    // handle form clicks\n    useEffect(() => {\n        const handleClick = (e: MouseEvent) => {\n            if (e.currentTarget && mainRef.current?.contains(e.currentTarget as Node)) {\n                return;\n            }\n            setFormClicked(false);\n        };\n\n        document.addEventListener('mousedown', handleClick);\n        return () => { document.removeEventListener('mousedown', handleClick) }\n    }, []);\n\n    const onClick = () => {\n        setFormClicked(true);\n    };\n\n    const onChange = (e: React.FormEvent<HTMLInputElement>) => {\n        const formValue = e.currentTarget.value;\n        const formName = e.currentTarget.name;\n        setForm(prev => ({ ...prev, [formName]: formValue }))\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const onFormSubmit = (e: React.SyntheticEvent & any) => { // ? how to add submitter field to the SyntheticEvent type\n        console.log(e); \n        e.preventDefault();\n        if (e.nativeEvent.submitter.outerText === 'Отмена') {\n            resetProfileFormValue();\n        }\n        if (e.nativeEvent.submitter.outerText === 'Сохранить') {\n            dispatch(patchUserData(form));\n        }\n    }\n\n    return (\n        <div className={styles.main} ref={mainRef}>\n            <nav className={styles.nav}>\n                <NavLink\n                    exact to={{ pathname: '/profile' }}\n                    activeClassName={styles.activeLink}\n                    className={`text text_type_main-large text-color-inactive ${styles.navChild}`}>\n                    Профиль\n                </NavLink>\n\n                <NavLink\n                    exact to={{ pathname: '/profile/orders' }}\n                    activeClassName={styles.activeLink}\n                    className={`text text_type_main-large text-color-inactive ${styles.navChild}`}>\n                    История заказов\n                </NavLink>\n\n                <Link\n                    onClick={onClickLogout}\n                    to={{ pathname: '/' }}\n                    className={`text text_type_main-large text-color-inactive ${styles.navChild}`}>\n                    Выход\n                </Link>\n\n                <p className={`text text_type_main-small text_color_inactive ${styles.navParagraph}`}>В этом разделе вы можете изменить свои персональные данные</p>\n            </nav>\n\n            <form onSubmit={onFormSubmit} onClick={onClick} className={styles.form}>\n                <Input\n                    type={'text'}\n                    placeholder={'Имя'}\n                    onChange={onChange}\n                    value={form.username}\n                    name={'username'}\n                    icon={'EditIcon'}\n                    error={false}\n                    errorText={'Ошибка'}\n                    size={'default'}\n                />\n\n                <div className={styles.formChild}>\n                    <Input\n                        type={'text'}\n                        placeholder={'Логин'}\n                        onChange={onChange}\n                        value={form.email}\n                        name={'email'}\n                        icon={'EditIcon'}\n                        error={false}\n                        errorText={'Ошибка'}\n                        size={'default'}\n                    />\n                </div>\n\n                <div className={styles.formChild}>\n                    <PasswordInput\n                        onChange={onChange}\n                        value={form.password}\n                        name={'password'}\n                    />\n                </div>\n\n\n                {isFormClicked && (\n                    <div className={styles.formChild}>\n                        <Button type=\"secondary\" size=\"medium\">\n                            Отмена\n                        </Button>\n\n                        <Button type=\"primary\" size=\"medium\">\n                            Сохранить\n                        </Button>\n                    </div>\n                )}\n\n            </form>\n        </div>\n\n    )\n}","import styles from './register.module.scss';\nimport { useState } from 'react';\nimport { useSelector, useDispatch } from '../../types/hooks';\nimport { Button, Input, PasswordInput } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { Link, Redirect, useHistory } from 'react-router-dom';\nimport { register } from '../../services/actions/auth/register';\nimport React from 'react';\n\nexport default function Register(): JSX.Element {\n    const history = useHistory();\n    const dispatch = useDispatch();\n\n    const user = useSelector(store => store.user);\n\n    const [form, setForm] = useState({\n        username: '',\n        email: '',\n        password: '',\n    });\n\n    const onChange = (e: React.FormEvent<HTMLInputElement>) => {\n        setForm(prev => ({ ...prev, [e.currentTarget.name]: e.currentTarget.value }))\n    }\n\n    const onFormSubmit = (e: React.SyntheticEvent) => {\n        e.preventDefault();\n        dispatch(register(form));\n        history.replace({ pathname: '/' });\n    }\n\n    if (user.username) {\n        return (\n            <Redirect to={{ pathname: '/' }} />\n        )\n    }\n\n    return (\n        <>\n            <div className={styles.main}>\n\n                <form onSubmit={onFormSubmit} className={styles.form}>\n                    <p className=\"text text_type_main-large\">\n                        Регистрация\n                    </p>\n\n                    <div className={styles.formChild}>\n\n                        <Input\n                            type={'text'}\n                            placeholder={'Имя'}\n                            onChange={onChange}\n                            value={form.username}\n                            name={'username'}\n                            error={false}\n                            errorText={'Ошибка'}\n                            size={'default'}\n                        />\n                    </div>\n\n                    <div className={styles.formChild}>\n                        <Input\n                            type={'text'}\n                            placeholder={'E-mail'}\n                            onChange={onChange}\n                            value={form.email}\n                            name={'email'}\n                            error={false}\n                            errorText={'Ошибка'}\n                            size={'default'}\n                        />\n                    </div>\n\n                    <div className={styles.formChild}>\n                        <PasswordInput\n                            onChange={onChange}\n                            value={form.password}\n                            name={'password'}\n                        />\n                    </div>\n\n                    <div className={styles.formChild}>\n                        <Button\n                            type=\"primary\"\n                            size=\"large\"\n                        >\n                            Зарегистрироваться\n                        </Button>\n                    </div>\n                </form>\n\n                <p className=\"text text_type_main-default text_color_inactive\">\n                    Уже зарегистрированы? <Link to={{ pathname: '/login' }}>Войти</Link>\n                </p>\n            </div>\n        </>\n    )\n}","import { AppThunk, AppDispatch } from \"../../reducers\";\nimport { setCookie } from \"../../../utils/cookies\";\nimport { checkResponse } from \"../../../utils/helpers\";\nimport { TFormData } from \"../../../types/types\";\nimport { REGISTER_POST_URL } from \"../../../utils/api-urls\";\nimport { USER_SET_CREDENTIALS } from \"../user\";\n\nexport const REGISTER_REQUEST = 'REGISTER_REQUEST' as const;\nexport const REGISTER_REQUEST_SUCCESS = 'REGISTER_REQUEST_SUCCESS' as const;\nexport const REGISTER_REQUEST_FAILED = 'REGISTER_REQUEST_FAILED' as const;\n\ninterface IRegisterRequest {\n    readonly type: typeof REGISTER_REQUEST;\n}\ninterface IRegisterRequestSuccess {\n    readonly type: typeof REGISTER_REQUEST_SUCCESS;\n}\ninterface IRegisterRequestFailed {\n    readonly type: typeof REGISTER_REQUEST_FAILED;\n}\n\nexport type TRegisterActions = IRegisterRequest | IRegisterRequestSuccess | IRegisterRequestFailed;\n\nexport const register: AppThunk = ({ username, email, password }: TFormData) =>\n    async (dispatch: AppDispatch) => {\n        dispatch({ type: REGISTER_REQUEST });\n\n        const requestOptions = {\n            method: 'POST',\n            body: JSON.stringify({ name: username, email: email, password: password }),\n            headers: { 'Content-Type': 'application/json' }\n        }\n\n        console.log('proceed to REGISTRATION');\n        await fetch(REGISTER_POST_URL, requestOptions)\n            .then(res => checkResponse(res))\n            .then(data => {\n                setCookie('accessToken', data.accessToken.split('Bearer ')[1]);\n                localStorage.setItem('refreshToken', data.refreshToken);\n                dispatch({ type: USER_SET_CREDENTIALS, user: data.user });\n                dispatch({ type: REGISTER_REQUEST_SUCCESS });\n            })\n            .catch(e => {\n                console.error(e);\n                dispatch({ type: REGISTER_REQUEST_FAILED })\n            });\n    }","import { Button, Input, PasswordInput } from '@ya.praktikum/react-developer-burger-ui-components'\nimport styles from './reset-password.module.scss';\nimport { Redirect, useHistory } from 'react-router-dom';\nimport { useSelector, useDispatch } from '../../types/hooks';\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { PASSWORD_FORGOT_RESTORE } from '../../services/actions/forgot-password';\nimport { resetPassword } from '../../services/actions/auth/password';\n\nexport default function ResetPassword(): JSX.Element {\n    const history = useHistory();\n    const dispatch = useDispatch();\n    const isPasswordForgotten = useSelector(store => store.forgotPassword.isPasswordForgotten);\n\n    const user = useSelector(store => store.user);\n\n    const [form, setForm] = useState({ password: '', token: '' });\n\n    const onFormChange = (e: React.FormEvent<HTMLInputElement>) => {\n        const formValue = e.currentTarget.value;\n        const formName = e.currentTarget.name;\n        setForm(prev => ({...prev, [formName]: formValue }))\n    };\n\n    const onFormSubmit = (e: React.SyntheticEvent) => {\n        e.preventDefault();\n        dispatch({ type: PASSWORD_FORGOT_RESTORE });\n        dispatch(resetPassword(form));\n        history.replace({ pathname: '/login' });\n    }\n\n    if (!isPasswordForgotten) {\n        return (\n            <Redirect to={{ pathname: '/' }} />\n        )\n    }\n\n    if (user.username) {\n        return (\n            <Redirect to={{ pathname: '/' }} />\n        )\n    }\n\n    return (\n        <div className={styles.main}>\n\n            <p className=\"text text_type_main-large\">\n                Восстановление пароля\n            </p>\n\n            <form onSubmit={onFormSubmit} className={styles.form}>\n                <PasswordInput\n                    onChange={onFormChange}\n                    value={form.password}\n                    name={'password'}\n                />\n\n                <div className={styles.formChild}>\n                    <Input\n                        type={'text'}\n                        placeholder={'Введите код из письма'}\n                        onChange={onFormChange}\n                        value={form.token}\n                        name={'token'}\n                        error={false}\n                        errorText={'Ошибка'}\n                        size={'default'}\n                    />\n                </div>\n\n                <div className={styles.formChild}>\n                    <Button type=\"primary\" size=\"large\">\n                        Сохранить\n                    </Button>\n                </div>\n\n            </form>\n\n            <p className=\"text text_type_main-default text_color_inactive\">\n                Вспомнили пароль? <Link to={{ pathname: '/login' }}>Войти</Link>\n            </p>\n\n        </div>\n    )\n}","import styles from './order-element.module.scss';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport React, { useCallback, useState, useEffect } from 'react';\nimport { useSelector } from '../../types/hooks';\n\n\nimport moment from 'moment';\nimport 'moment/locale/ru';\n\nimport Loader from '../loader/loader';\n\nimport { TOrder, TIngredient } from '../../types/types';\n\ninterface IOrderElementProps {\n    order: TOrder;\n    onClick?: () => void;\n    from?: string;\n}\n\nexport default function OrderElement({ onClick, order, from }: IOrderElementProps): JSX.Element {\n    const { ingredientsData } = useSelector(store => store.ingredients);\n    const [ingredientsInOrder, setIngredientsInOrder] = useState<Array<TIngredient>>([]);\n    const [doneIngredients, setDoneIngredients] = useState(false);\n    const [status, setStatus] = useState({\n        value: '',\n        color: ''\n    })\n    // Handling order statuses\n    const matchOrderStatus = useCallback((s: string) => {\n        if (s === 'done') {\n            setStatus({value: 'Выполнен', color: 'statusDone'})\n            return;\n        }\n        if (s === 'created') {\n            setStatus({value: 'Готовится', color: 'statusInProgress'})\n            return;\n        }\n        if (s === 'pending') {\n            setStatus({value: 'Отменен', color: 'statusCancelled'})\n            return;\n        }\n        throw new Error('status value is not valid')\n    }, [])\n\n    useEffect(() => {\n        if (!order?.ingredients || !ingredientsData) return;\n\n        if (order.status) {\n            matchOrderStatus(order.status);\n        } else {\n            throw new Error('something is wrong with order.status value')\n        }\n\n        const matchedIngs: Array<TIngredient> = [];\n\n        order.ingredients.forEach(orderIng => {\n            const matched = ingredientsData.find((dataIng) => dataIng._id === orderIng);\n            if (matched !== undefined) {\n                matchedIngs.push(matched);\n            }\n        })\n\n        if (ingredientsInOrder.length !== matchedIngs.length) {\n            setIngredientsInOrder([...matchedIngs]);\n            setDoneIngredients(true);\n        }\n    }, [ingredientsData, order.ingredients, ingredientsInOrder.length, order.status, matchOrderStatus]);\n\n    return (\n        <div className={styles.main} onClick={onClick}>\n            <span className={styles.content}>\n\n                <span className={`${styles.row} mt-3 mb-6`}>\n                    <p className={`text text_type_digits-default`}>{order.number}</p>\n                    <p className={`text text_type_main-default text_color_inactive`}>{moment(order.createdAt).calendar()} i-GMT+3</p>\n                </span>\n\n                <p className=\"text text_type_main-medium mb-4\">{order.name}</p>\n\n                {from === 'profile' &&\n                    <p className={`${styles[status.color]} text text_type_main-default mb-4`}>{status.value}</p>\n                }\n\n                <span className={`${styles.row} mt-3 mb-5`}>\n                    <span className={styles.icons}>\n                        {!doneIngredients\n                            ? (<Loader />)\n                            : ingredientsInOrder.slice(0, 6).map((ing, index) => {\n                                return (\n                                    <span className={styles.ing} key={index}>\n                                        {ingredientsInOrder.length > 6 && (\n                                            <span className={`text text_type_digits-default ${styles.iconNumber}`}>+{ingredientsInOrder.length - 6}</span>\n                                        )}\n                        \n                                        <img src={ing.image_mobile} alt=\"\" className={`${styles.ingIcons}`} />\n                                    </span>\n                                )})\n                            }\n                    </span>\n\n                    <span className={styles.value}>\n                        <p className=\"text text_type_digits-default mr-2\">\n                            {ingredientsInOrder.reduce((acc, ing) => {\n                                return acc += ing.price\n                            }, 0)}\n                        </p>\n                        <CurrencyIcon type=\"primary\" />\n                    </span>\n                </span>\n            </span>\n        </div>\n    )\n}","export const WS_CONNECTION_START = 'WS_CONNECTION_START' as const;\nexport const WS_CONNECTION_SUCCESS = 'WS_CONNECTION_SUCCESS' as const;\nexport const WS_CONNECTION_ERROR = 'WS_CONNECTION_ERROR' as const;\nexport const WS_CONNECTION_CLOSED = 'WS_CONNECTION_CLOSED' as const;\nexport const WS_GET_MESSAGE = 'WS_GET_MESSAGE' as const;\nexport const WS_SEND_MESSAGE = 'WS_SEND_MESSAGE' as const;\n\nexport type TWsFunctions = {\n    wsInit: typeof WS_CONNECTION_START,\n    wsSendMessage: typeof WS_SEND_MESSAGE,\n    onOpen: typeof WS_CONNECTION_SUCCESS,\n    onClose: typeof WS_CONNECTION_CLOSED,\n    onError: typeof WS_CONNECTION_ERROR,\n    onMessage: typeof WS_GET_MESSAGE\n}\n\nexport const wsActions = {\n    wsInit: WS_CONNECTION_START,\n    wsSendMessage: WS_SEND_MESSAGE,\n    onOpen: WS_CONNECTION_SUCCESS,\n    onClose: WS_CONNECTION_CLOSED,\n    onError: WS_CONNECTION_ERROR,\n    onMessage: WS_GET_MESSAGE\n  };\n\nexport interface IWSConnectionStart {\n    readonly type: typeof WS_CONNECTION_START;\n    wsUrl: string;\n}\nexport interface IWSConnectionSuccess {\n    readonly type: typeof WS_CONNECTION_SUCCESS;\n}\nexport interface IWSConnectionError {\n    readonly type: typeof WS_CONNECTION_ERROR;\n    payload: Record<string, any>;\n}\nexport interface IWSConnectionClosed {\n    readonly type: typeof WS_CONNECTION_CLOSED;\n}\nexport interface IWSGetMessage {\n    readonly type: typeof WS_GET_MESSAGE;\n    payload: Record<string, any>;\n}\nexport interface IWSSendMessage {\n    readonly type: typeof WS_SEND_MESSAGE;\n    payload: Record<string, any>;\n}\n\nexport type TWsActions = \n    IWSConnectionStart |\n    IWSConnectionSuccess |\n    IWSConnectionError |\n    IWSConnectionClosed |\n    IWSGetMessage |\n    IWSSendMessage ;\n","import styles from './profile-orders.module.scss';\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { useHistory, useLocation, Link, NavLink } from 'react-router-dom';\nimport { useSelector, useDispatch } from '../../types/hooks';\nimport { logout } from '../../services/actions/auth/logout';\nimport { WS_USER_ORDERS_URL } from '../../utils/api-urls';\n\nimport Loader from '../../components/loader/loader';\nimport OrderElement from '../../components/order-element/order-element';\nimport { TOrder } from '../../types/types';\nimport { VISIBLE_ORDERS_DETAILS } from '../../services/actions/modals';\nimport { WS_CONNECTION_CLOSED, WS_CONNECTION_START } from '../../services/actions/socket';\n\nexport default function ProfileOrders(): JSX.Element {\n    const history = useHistory();\n    const location = useLocation();\n    const dispatch = useDispatch();\n\n    const messages = useSelector(store => store.ws.messages);\n    const [orders, setOrders] = useState<Array<TOrder>>([]);\n\n    useEffect(() => {\n        dispatch({ type: WS_CONNECTION_START, wsUrl: WS_USER_ORDERS_URL })\n        return () => {dispatch({ type: WS_CONNECTION_CLOSED })}\n    }, [dispatch])\n\n    useEffect(() => {\n        const lastMessage = messages[messages.length - 1];\n        if (!lastMessage) return;\n\n        const parsedMessage = JSON.parse(String(lastMessage));\n        setOrders(() => parsedMessage.orders);\n\n        console.log(parsedMessage.orders);\n    }, [messages]);\n\n    const onClick = (order: TOrder) => {\n        history.replace({ pathname: `/profile/orders/${order.number}`, state: { background: location, order: order } })\n        dispatch({ type: VISIBLE_ORDERS_DETAILS, value: true })\n    }\n\n    const onClickLogout = useCallback(() => {\n        dispatch(logout());\n    }, [dispatch]);\n\n    return (\n        <div className={styles.main}>\n            <div className={styles.left}>\n\n                <nav className={styles.nav}>\n                    <NavLink\n                        exact to={{ pathname: '/profile' }}\n                        activeClassName={styles.activeLink}\n                        className={`text text_type_main-medium text-color-inactive ${styles.navChild}`}>\n                        Профиль\n                    </NavLink>\n\n                    <NavLink\n                        exact to={{ pathname: '/profile/orders' }}\n                        activeClassName={styles.activeLink}\n                        className={`text text_type_main-medium text-color-inactive ${styles.navChild}`}>\n                        История заказов\n                    </NavLink>\n\n                    <Link\n                        onClick={onClickLogout}\n                        to={{ pathname: '/' }}\n                        className={`text text_type_main-medium text-color-inactive ${styles.navChild}`}>\n                        Выход\n                    </Link>\n\n                    <p className={`text text_type_main-small text_color_inactive ${styles.navParagraph}`}>В этом разделе вы можете изменить свои персональные данные</p>\n                </nav>\n            </div>\n\n            <div className={styles.right}>\n                {!orders\n                    ? (<Loader />)\n                    : (\n                        orders.slice(0).reverse().map((order, index) => { // for some reason returned reversed\n                            return (\n                                <OrderElement\n                                    key={index}\n                                    onClick={() => onClick(order)}\n                                    order={order}\n                                    from='profile'\n                                />\n                            )\n                        })\n                    )\n                }\n            </div>\n\n        </div>\n    )\n}","import styles from './feed-order-numbers-overall.module.scss'\nimport React from 'react';\n\ninterface IFeedOrderNumbersOverall {\n    period: 'today' | 'allTime';\n    quantity: number;\n}\n\nexport const FeedOrderNumbersOverall = ({ quantity, period }: IFeedOrderNumbersOverall): JSX.Element => {\n\n    if (period === 'today') {\n        return (\n            <div className={styles.ordersToday}>\n                <p className=\"text text_type_main-medium mb-3\">Выполнено за сегодня:</p>\n                <p className={`${styles.ordersTodayNumber} text text_type_digits-large`}>{quantity}</p>\n            </div>\n        )\n    } else if (period === 'allTime') {\n        return (\n            <div className={styles.ordersAllTime}>\n                <p className=\"text text_type_main-medium mb-3\">Выполнено за все время:</p>\n                <p className={`${styles.ordersAllTimeNumber} text text_type_digits-large`}>{quantity}</p>\n            </div>\n        )\n    } else {\n        throw new Error('Not correct period was given');\n    }\n    \n}","import Loader from '../../../components/loader/loader';\nimport styles from './feed-order-numbers.module.scss';\nimport React from 'react';\n\n\ninterface IFeedOrderNumbers {\n    status: 'done' | 'pending';\n    ordersMarkup: JSX.Element[][];\n}\n\nexport const FeedOrderNumbers = ({ ordersMarkup, status }: IFeedOrderNumbers): JSX.Element => {\n\n    if (status === 'done') {\n        return (\n            <div className={styles.ordersReady}>\n                <p className=\"text text_type_main-medium mb-5\">Готовы:</p>\n\n                <div className={styles.wrapper}>\n                    {(ordersMarkup.length > 0)\n                        ? (\n                            ordersMarkup.map((column, ind) => {\n                                return (\n                                    <div key={ind} className='mr-3'>\n                                        {column}\n                                    </div>\n                                )\n                            })\n                        )\n                        : (<Loader />)\n                    }\n                </div>\n            </div>\n        )\n    } else if (status === 'pending') {\n        return (\n            <div className={styles.ordersPrep}>\n                <p className=\"text text_type_main-medium mb-5\">В работе:</p>\n\n                <div className={styles.wrapper}>\n                    {(ordersMarkup.length > 0)\n                        ? (\n                            ordersMarkup.map((column, ind) => {\n                                return (\n                                    <div key={ind} className='mr-3'>\n                                        {column}\n                                    </div>\n                                )\n                            })\n                        )\n                        : (\n                            // Populate fake data if no orders with status 'pending'\n                            <div>\n                                <p key='1' className='text text_type_digits-default'>034523</p>\n                                <p key='2' className='text text_type_digits-default'>034524</p>\n                                <p key='3' className='text text_type_digits-default'>034525</p>\n                            </div>\n                        )\n                    }\n                </div>\n            </div>\n        )\n    } else {\n        throw new Error('wrong status for FeedOrderNumbers component was given');\n    }\n}","import styles from './feed.module.scss';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { useSelector, useDispatch } from '../../types/hooks';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { WS_ALL_ORDERS_URL } from '../../utils/api-urls';\nimport Loader from '../../components/loader/loader';\nimport OrderElement from '../../components/order-element/order-element';\nimport { TOrder } from '../../types/types';\nimport { VISIBLE_ORDERS_DETAILS } from '../../services/actions/modals';\nimport { WS_CONNECTION_CLOSED, WS_CONNECTION_START } from '../../services/actions/socket';\nimport { FeedOrderNumbersOverall } from './feed-order-numbers-overall/feed-order-numbers-overall';\nimport { FeedOrderNumbers } from './feed-order-numbers/feed-order-numbers';\n\nexport default function Feed(): JSX.Element {\n    const history = useHistory();\n    const location = useLocation();\n    const dispatch = useDispatch();\n    const ORDERS_TO_DISPLAY = 12;\n\n    const messages = useSelector(store => store.ws.messages);\n    const [orders, setOrders] = useState<Array<TOrder>>([]);\n    const [total, setTotal] = useState(0);\n    const [totalToday, setTotalToday] = useState(0);\n    const [doneOrders, setDoneNumbers] = useState<Array<JSX.Element[]>>([]);\n    const [processOrders, setProcessNumbers] = useState<Array<JSX.Element[]>>([]);\n    \n    useEffect(() => {\n        dispatch({ type: WS_CONNECTION_START, wsUrl: WS_ALL_ORDERS_URL });\n        return () => { dispatch({ type: WS_CONNECTION_CLOSED }) }\n    }, [dispatch]);\n\n    useEffect(() => {\n        const lastMessage = messages[messages.length - 1];\n        if (!lastMessage) return;\n\n        const parsedMessage = JSON.parse(String(lastMessage));\n        setOrders(parsedMessage.orders);\n        setTotal(parsedMessage.total);\n        setTotalToday(parsedMessage.totalToday);\n    }, [messages]);\n\n    const onClick = (order: TOrder) => {\n        history.replace({ pathname: `/feed/${order.number}`, state: { background: location, order: order } })\n        dispatch({ type: VISIBLE_ORDERS_DETAILS, value: true })\n    }\n\n    // Handling order numbers\n\n    const getJSXMarkup = useCallback((orderNumbers: Array<string>): JSX.Element[][] => {\n        const CHUNK_SIZE = 10;\n        let orderNumbersChunk: Array<string>;\n        const jsxMarkup: JSX.Element[][] = []\n\n        for (let i = 0; i < orderNumbers.length; i += CHUNK_SIZE) { // i: 0, 10, 20 ...\n            orderNumbersChunk = orderNumbers.slice(i, i + CHUNK_SIZE) // holds every ten els of 'orderNumbers'\n\n            const jsxOrderNumbersChunk = orderNumbersChunk.map((n, ind) => { // create an array of ten jsx elements\n                return (\n                    <p key={ind} className={`${styles.ordersDone} text text_type_digits-default`}>\n                        {n}\n                    </p>\n                )\n            })\n\n            jsxMarkup.push(jsxOrderNumbersChunk); // an array of jsx elements arrays \n        }\n        return jsxMarkup;\n    }, [])\n\n    useEffect(() => {\n        if (!orders) return;\n\n        const handleOrderNumbers = (s: string, fn: (content: JSX.Element[][]) => void) => {\n            const orderNumbersByStatus = orders.filter(o => o.status === s).map(o => o.number);\n            const jsxMarkup = getJSXMarkup(orderNumbersByStatus);\n            fn([...jsxMarkup]);\n        }\n\n        handleOrderNumbers('done', setDoneNumbers);\n        handleOrderNumbers('process', setProcessNumbers);\n    }, [orders, getJSXMarkup]);\n\n    return (\n        !orders\n            ? (<Loader />)\n            : (\n                <div className={styles.main}>\n\n                    <div className={styles.left}>\n                        <div className={styles.orders}>\n                            <p className={`${styles.feedHeading} text text_type_main-large mb-6`}>Лента заказов</p>\n                            {orders.slice(0, ORDERS_TO_DISPLAY).map((order, index) => {\n                                return (\n                                    <OrderElement\n                                        key={index}\n                                        onClick={() => onClick(order)}\n                                        order={order}\n                                        from='feed'\n                                    />\n                                )\n                            })}\n                        </div>\n                    </div>\n\n                    <div className={styles.right}>\n                        <div className={styles.stats}>\n                            <div className={styles.ordersStats}>\n                                <FeedOrderNumbers status=\"done\" ordersMarkup={doneOrders} />\n                                <FeedOrderNumbers status=\"pending\" ordersMarkup={processOrders} />\n                            </div>\n\n                            <FeedOrderNumbersOverall period={\"allTime\"} quantity={total} />\n                            <FeedOrderNumbersOverall period={\"today\"} quantity={totalToday} />\n                        </div>\n\n                    </div>\n                </div>\n            )\n    )\n}","import styles from './order-view.module.scss';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useSelector, useDispatch } from '../../types/hooks';\n\nimport { useLocation } from 'react-router-dom';\nimport Loader from '../loader/loader';\n\nimport moment from 'moment';\nimport 'moment/locale/ru';\n\nimport { getOrder } from '../../services/actions/order-details';\n\nimport { TIngredient, TOrder } from '../../types/types';\n\ninterface IOrderViewProps {\n    order?: TOrder;\n    modal?: boolean;\n}\n\nexport default function OrderView({ order, modal }: IOrderViewProps): JSX.Element {\n    const location = useLocation();\n    const dispatch = useDispatch();\n    const { ingredientsData } = useSelector(store => store.ingredients);\n    const [ingredientsInOrder, setIngredientsInOrder] = useState<Array<TIngredient>>([]);\n    const [resultedOrder, setResultedOrder] = useState<TOrder>();\n    const [doneWithIngredients, setDoneWithIngredients] = useState(false);\n    const [status, setStatus] = useState({\n        value: '',\n        color: ''\n    })\n\n    // Handling order statuses\n    const matchOrderStatus = useCallback((s: string) => {\n        if (s === 'done') {\n            setStatus({value: 'Выполнен', color: 'statusDone'})\n            return;\n        }\n        if (s === 'created') {\n            setStatus({value: 'Готовится', color: 'statusInProgress'})\n            return;\n        }\n        if (s === 'pending') {\n            setStatus({value: 'Отменен', color: 'statusCancelled'})\n            return;\n        }\n        throw new Error('status value is not valid')\n    }, [])\n\n    //  if there is NO 'order' prop it stores a value from 'dispatch(getOrder(orderNumber))' call\n    const orderIfNoProps = useSelector(store => store.orderDetails.order) as TOrder;\n\n    const matchIngredientsFromOrder = useCallback((order: TOrder) => {\n        const matchedIngs: Array<TIngredient> = [];\n\n        order.ingredients.forEach(orderIng => {\n            const matched = ingredientsData.find(dataIng => dataIng._id === orderIng);\n            if (matched !== undefined) {\n                matchedIngs.push(matched);\n            }\n        })\n\n        if (ingredientsInOrder.length !== matchedIngs.length) {\n            setIngredientsInOrder([...ingredientsInOrder, ...matchedIngs]);\n            setDoneWithIngredients(true);\n        }\n    }, [ingredientsData, ingredientsInOrder]);\n\n    // let orderNumber = '';\n    const getOrderNumberFromLocation = useCallback(() => {\n        const l = location.pathname;\n        if (l.startsWith('/profile/orders/')) {\n            return l.split('/')[3]; // e.g. '/profile/orders/3053'\n        }\n        if (l.startsWith('/feed/')) {\n            return l.split('/')[2]; // e.g. '/feed/3053'\n        }\n        throw new Error('location.pathname is not in orders or feed')\n    }, [location.pathname]);\n\n    useEffect(() => {\n        if (!order) {\n            const orderNumber = getOrderNumberFromLocation();\n            dispatch(getOrder(orderNumber)); // change 'orderIfNoProps' variable\n            return;\n        }\n\n        setResultedOrder(resultedOrder => ({ ...resultedOrder, ...order }))\n        matchIngredientsFromOrder(order);\n        matchOrderStatus(order.status)\n    }, [order, dispatch, matchIngredientsFromOrder, matchOrderStatus, getOrderNumberFromLocation])\n\n    useEffect(() => {\n        if (order || Object.keys(orderIfNoProps).length === 0) return;\n\n        // Если не было order в пропсах: 'orderIfNoProps' получена от сервера и обновлена в сторе\n        setResultedOrder(resultedOrder => ({ ...resultedOrder, ...orderIfNoProps }))\n        matchIngredientsFromOrder(orderIfNoProps)\n        matchOrderStatus(orderIfNoProps.status)\n    }, [order, orderIfNoProps, matchIngredientsFromOrder, matchOrderStatus])\n\n\n    return (\n        !resultedOrder\n            ? (<Loader />)\n            : (\n                <div className={modal ? styles.mainModal : styles.main}>\n                    <p className={`${styles.orderNumber} text text_type_digits-medium mb-10`} >#{resultedOrder.number}</p>\n                    <p className={` ${styles.orderName} text text_type_main-medium mb-5`}>{resultedOrder.name}</p>\n\n                    <p className={`${styles[status.color]} text text_type_main-default mb-15`}>{status.value}</p>\n\n                    <div className={` ${styles.orderContent} `} >\n                        <p className='text text_type_main-medium mb-7'>Состав:</p>\n                        <div className={` ${styles.orderIngredients} `}>\n\n                            {!doneWithIngredients\n                                ? (<Loader />)\n                                : (ingredientsInOrder.map((ing, index) => {\n                                    return (\n                                        <div className={` ${styles.orderIngredientRow} mb-1`} key={index}>\n\n                                            <div className={styles.ingIconSpan}>\n                                                <img src={ing.image_mobile} alt=\"\" className={`${styles.ingIcon}`} />\n                                            </div>\n\n                                            <p className={`${styles.ingName} text text_type_main-default`}>{ing.name}</p>\n\n                                            <span className={styles.ingValue}>\n                                                <p className={`text text_type_digits-default mr-3`}>1x {ing.price}</p>\n                                                <CurrencyIcon type=\"primary\" />\n                                            </span>\n                                        </div>\n                                    )\n                                }))\n                            }\n                        </div>\n                    </div>\n\n                    <span className={`${styles.row} mt-10`}>\n                        <p className={`${styles.orderDate} text text_type_main-default text_color_inactive`}>{moment(resultedOrder.createdAt).calendar()} i-GMT+3</p>\n                        <span className={styles.orderValue}>\n                            <p className=\"text text_type_digits-default mr-3\">\n                                {ingredientsInOrder.reduce((acc, ing) => {\n                                    return acc += ing.price\n                                }, 0)}\n                            </p>\n                            <CurrencyIcon type='primary' />\n                        </span>\n                    </span>\n                </div>\n            )\n    )\n}","import { Route, Redirect, RouteProps } from 'react-router-dom';\nimport { useEffect, useState, useCallback } from 'react';\nimport { useSelector, useDispatch } from '../types/hooks';\nimport { getUserData } from '../services/actions/auth/user-data';\nimport Loader from './loader/loader';\nimport React from 'react';\n\ninterface IProtectedRoute extends RouteProps {\n  children?: React.ReactNode;\n}\n\nexport default function ProtectedRoute({ children, ...rest }: IProtectedRoute): JSX.Element | null {\n  const dispatch = useDispatch();\n  const [isUserLoaded, setUserLoaded] = useState(false);\n  const user = useSelector(store => store.user);\n\n  const init = useCallback(async () => {\n    await dispatch(getUserData())\n    setUserLoaded(true)\n  }, [dispatch])\n\n  useEffect(() => {\n    init();\n  }, [init]);\n\n  if (!isUserLoaded) {\n    return null\n  }\n\n  return (\n    isUserLoaded ? (\n      <Route\n        {...rest}\n        render={({ location }) =>\n          user.username ? (\n            children\n          ) : (\n            <Redirect\n              to={{\n                pathname: '/login',\n                state: { from: location }\n              }}\n            />\n          )\n        }\n      />) : (<Loader />)\n  );\n}","\nimport styles from './routes.module.scss';\n\nimport React, { useEffect } from 'react';\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport { Location } from \"history\";\nimport { Route, useLocation, Switch, useHistory } from 'react-router-dom';\nimport { useSelector, useDispatch } from '../../types/hooks';\n\nimport { getIngredients } from '../../services/actions/ingredients';\nimport { getUserData } from '../../services/actions/auth/user-data';\n\nimport BurgerConstructor from '../burger-constructor/burger-constructor';\nimport BurgerIngredients from '../burger-ingredients/burger-ingredients';\nimport OrderDetails from '../order-details/order-details';\nimport IngredientDetails from '../ingredient-details/ingredient-details';\nimport Modal from '../modal/modal';\nimport PageNotFound from '../../pages/page-not-found/page-not-found';\nimport Login from '../../pages/login/login';\nimport ForgotPassword from '../../pages/forgot-password/forgot-password';\nimport Profile from '../../pages/profile/profile';\nimport Register from '../../pages/register/register';\nimport ResetPassword from '../../pages/reset-password/reset-password';\nimport ProfileOrders from '../../pages/profile-orders/profile-orders';\nimport Feed from '../../pages/feed/feed';\nimport OrderView from '../order-view/order-view';\nimport ProtectedRoute from '../protected-route';\n\nimport { RootState } from '../../services/reducers/index';\nimport { VISIBLE_ORDER_DETAILS, VISIBLE_INGREDIENT_DETAILS } from '../../services/actions/modals';\n\nimport type { TOrder } from '../../types/types';\n\ninterface ILocationState {\n    background: Location;\n    order: TOrder;\n}\n\nexport default function Routes(): JSX.Element {\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const location = useLocation<ILocationState>();\n    const background = location.state?.background;\n\n    const { visibleOrderDetails } = useSelector((store:RootState) => store.modals);\n\n    useEffect(() => {\n        dispatch(getIngredients());\n        dispatch(getUserData());\n    }, [dispatch])\n\n    const closeModal = () => {\n        dispatch({ type: VISIBLE_ORDER_DETAILS, value: false })\n        dispatch({ type: VISIBLE_INGREDIENT_DETAILS, value: false })\n        if (background) {\n            history.replace({ pathname: background.pathname });\n        }\n    }\n\n    console.log(location);\n\n    return (\n        <>\n            <Switch location = {background || location}>\n\n                <Route path='/register'>\n                    <Register />\n                </Route>\n\n                <Route path='/login'>\n                    <Login />\n                </Route>\n\n                <Route path='/forgot-password'>\n                    <ForgotPassword />\n                </Route>\n\n                <Route path='/reset-password'>\n                    <ResetPassword />\n                </Route>\n\n                <Route exact={true} path='/ingredients/:id'>\n                    <IngredientDetails />\n                </Route>\n\n                <Route exact={true} path='/feed'>\n                    <Feed />\n                </Route>\n\n                <Route path='/feed/:id'>\n                    <OrderView />\n                </Route>\n\n                <ProtectedRoute exact={true} path='/profile'>\n                    <Profile />\n                </ProtectedRoute>\n\n                <ProtectedRoute exact={true} path='/profile/orders'>\n                    <ProfileOrders />\n                </ProtectedRoute>\n\n                <ProtectedRoute path='/profile/orders/:id'>\n                    <OrderView />\n                </ProtectedRoute>\n\n                <Route exact={true} path='/'>\n                    <main className={styles.main}>\n                        <DndProvider backend={HTML5Backend}>\n                            <BurgerIngredients />\n                            <BurgerConstructor />\n                        </DndProvider>\n                    </main>\n\n                    {visibleOrderDetails &&\n                        <Modal onClose={closeModal}>\n                            <OrderDetails />\n                        </Modal>\n                    }\n                </Route>\n\n                <Route>\n                    <PageNotFound />\n                </Route>\n            </Switch>\n\n            {\n                background &&\n                <Route exact={true} path='/ingredients/:id'>\n                    <Modal onClose={closeModal}>\n                        <IngredientDetails />\n                    </Modal>\n                </Route>\n            }\n\n            {\n                background &&\n                <Route exact={true} path={`${background.pathname}/:id`}>\n                    <Modal onClose={closeModal}>\n                        <OrderView modal={true} order={location.state.order} />\n                    </Modal>\n                </Route>\n            }\n\n        </>\n    )\n}","import AppHeader from '../app-header/app-header';\nimport React from 'react';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport Routes from '../routes/routes';\n\nexport default function App(): JSX.Element {\n\n    return (\n        <Router>\n            <AppHeader />\n            <Routes />\n        </Router>\n    )\n}","import {\n  ADD_CART_INGREDIENT,\n  DELETE_CART_INGREDIENT,\n  ADD_CART_INGREDIENT_BUN,\n  MOVE_CART_INGREDIENT,\n  CLEAR_CART_INGREDIENT,\n  TCartActions\n} from '../actions/cart';\nimport update from 'immutability-helper';\nimport type { TIngredient } from '../../types/types';\n\ninterface IState {\n  readonly сartIngredients: ReadonlyArray<TIngredient>;\n  readonly bunIngredients: ReadonlyArray<TIngredient>;\n}\n\nconst initialState: IState = {\n  сartIngredients: [],\n  bunIngredients: []\n}\n\nexport const cartReducer = (state = initialState, action: TCartActions): IState => {\n  switch (action.type) {\n    case ADD_CART_INGREDIENT: {\n      return {\n        ...state,\n        сartIngredients: [...state.сartIngredients, action.ingredient]\n      };\n    }\n    case ADD_CART_INGREDIENT_BUN: {\n      return {\n        ...state,\n        bunIngredients: [action.ingredient]\n      };\n    }\n    case MOVE_CART_INGREDIENT: { // ingredient: {item: TIngredient, index: number}\n      return {\n        ...state,\n        сartIngredients: update(state.сartIngredients, {\n          $splice: [\n            [action.ingredient.index, 1],\n            [action.dropIndex, 0, action.ingredient.item],\n          ] as never,\n        })\n      };\n    }\n    case DELETE_CART_INGREDIENT: { // ingredient: number (of el in a cart)\n      return {\n        ...state,\n        сartIngredients: state.сartIngredients.filter((_, index) => index !== action.ingredientIndex)\n      };\n    }\n    case CLEAR_CART_INGREDIENT: {\n      return initialState;\n    }\n    default: {\n      return state;\n    }\n  }\n}","import {\r\n  GET_INGREDIENTS_REQUEST,\r\n  GET_INGREDIENTS_REQUEST_SUCCESS,\r\n  GET_INGREDIENTS_REQUEST_ERROR,\r\n  TIngredientsActions\r\n} from '../actions/ingredients';\r\nimport type { TIngredient } from '../../types/types';\r\n\r\ninterface IState {\r\n  readonly ingredientsData: ReadonlyArray<TIngredient>;\r\n  readonly isLoading: boolean;\r\n  readonly hasError: boolean;\r\n}\r\n\r\nconst initialState: IState = {\r\n  ingredientsData: [],\r\n  isLoading: false,\r\n  hasError: false\r\n}\r\n\r\nexport const ingredientsReducer = (state = initialState, action: TIngredientsActions): IState => {\r\n  switch (action.type) {\r\n    case GET_INGREDIENTS_REQUEST: {\r\n      return {\r\n        ...state,\r\n        isLoading: true\r\n      }\r\n    }\r\n    case GET_INGREDIENTS_REQUEST_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        ingredientsData: action.payload,\r\n        isLoading: false\r\n      }\r\n    }\r\n    case GET_INGREDIENTS_REQUEST_ERROR: {\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        hasError: true\r\n      }\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}","import {\r\n  VISIBLE_ORDER_DETAILS,\r\n  VISIBLE_INGREDIENT_DETAILS,\r\n  VISIBLE_ORDERS_DETAILS,\r\n  TModalsActions\r\n} from '../actions/modals';\r\n\r\ninterface IState {\r\n  readonly visibleOrderDetails: boolean;\r\n  readonly visibleIngredientDetails: boolean;\r\n  readonly visibleOrdersDetails: boolean;\r\n}\r\n\r\nconst initialState: IState = {\r\n  visibleOrderDetails: false,\r\n  visibleIngredientDetails: false,\r\n  visibleOrdersDetails: false\r\n}\r\n\r\nexport const modalsReducer = (state = initialState, action: TModalsActions): IState => {\r\n  switch (action.type) {\r\n    case VISIBLE_ORDER_DETAILS: {\r\n      return {\r\n        ...state,\r\n        visibleOrderDetails: action.value\r\n      }\r\n    }\r\n    case VISIBLE_INGREDIENT_DETAILS: {\r\n      return {\r\n        ...state,\r\n        visibleIngredientDetails: action.value\r\n      }\r\n    }\r\n    case VISIBLE_ORDERS_DETAILS: {\r\n      return {\r\n        ...state,\r\n        visibleOrdersDetails: action.value\r\n      }\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}","import { SET_ACTIVE_INGREDIENT, TIngredientDetailsActions } from '../actions/ingredient-details';\r\nimport type { TIngredient } from '../../types/types';\r\n\r\ninterface IState {\r\n  readonly activeIngredient: TIngredient | null;\r\n}\r\n\r\nconst initialState: IState = {\r\n  activeIngredient: null,\r\n}\r\n\r\nexport const ingredientDetailsReducer = (state = initialState, action: TIngredientDetailsActions): IState => {\r\n  switch (action.type) {\r\n    case SET_ACTIVE_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        activeIngredient: action.activeIngredient\r\n      }\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}","import {\r\n  POST_ORDER_REQUEST,\r\n  POST_ORDER_SUCCESS,\r\n  POST_ORDER_FAILED,\r\n  GET_ORDER_REQUEST,\r\n  GET_ORDER_SUCCESS,\r\n  GET_ORDER_FAILED,\r\n  RESET_ORDER_NUMBER,\r\n  TOrderDetailsActions\r\n} from '../actions/order-details';\r\n\r\nimport type { TOrder } from '../../types/types';\r\n\r\ninterface IState {\r\n  ingredientsIDs: ReadonlyArray<string>;\r\n  orderNumber: null | number;\r\n  isLoading: boolean;\r\n  hasError: boolean;\r\n  order: TOrder | Record<string, never>;\r\n}\r\n\r\nconst initialState: IState = {\r\n  ingredientsIDs: [],\r\n  orderNumber: null,\r\n  isLoading: false,\r\n  hasError: false,\r\n  order: {},\r\n}\r\n\r\nexport const orderDetailsReducer = (state = initialState, action: TOrderDetailsActions): IState => {\r\n  switch (action.type) {\r\n    case POST_ORDER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        isLoading: true\r\n      }\r\n    }\r\n    case POST_ORDER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        orderNumber: action.orderNumber,\r\n        ingredientsIDs: action.ingredientsIDs\r\n      }\r\n    }\r\n    case POST_ORDER_FAILED: {\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        hasError: true,\r\n      }\r\n    }\r\n    case GET_ORDER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        isLoading: true\r\n      }\r\n    }\r\n    case GET_ORDER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        order: action.order,\r\n      }\r\n    }\r\n    case GET_ORDER_FAILED: {\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        hasError: true,\r\n      }\r\n    }\r\n    case RESET_ORDER_NUMBER: {\r\n      return {\r\n        ...state,\r\n        orderNumber: null,\r\n      }\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}","import { \n    PASSWORD_FORGOT, \n    PASSWORD_FORGOT_RESTORE, \n    TForgotPasswordActions\n} from '../actions/forgot-password';\n\ninterface IState {\n    readonly isPasswordForgotten: boolean;\n}\n\nconst initialState: IState = {\n    isPasswordForgotten: false,\n}\n\nexport const forgotPasswordReducer = (state = initialState, action: TForgotPasswordActions): IState => {\n    switch (action.type) {\n        case PASSWORD_FORGOT: {\n            return {\n                ...state,\n                isPasswordForgotten: true\n            }\n        }\n        case PASSWORD_FORGOT_RESTORE: {\n            return {\n                ...state,\n                isPasswordForgotten: false\n            }\n        }\n        default: {\n            return state;\n        }\n    }\n}","import { USER_SET_CREDENTIALS, USER_LOGOUT, TUserActions } from '../actions/user';\n\ninterface IState {\n    readonly username: string;\n    readonly email: string;\n}\n\nconst initialState: IState = {\n    username: '',\n    email: ''\n}\n\nexport const userReducer = (state = initialState, action: TUserActions): IState => {\n    switch (action.type) {\n        case USER_SET_CREDENTIALS: {\n            return {\n                ...state,\n                email: action.user.email,\n                username: action.user.name,\n            }\n        }\n        case USER_LOGOUT: {\n            return initialState;\n        }\n        default: {\n            return state;\n        }\n    }\n}","import {\n    WS_CONNECTION_SUCCESS,\n    WS_CONNECTION_ERROR,\n    WS_CONNECTION_CLOSED,\n    WS_GET_MESSAGE,\n    TWsActions\n} from '../actions/socket';\n\ninterface IState {\n    readonly wsConnected: boolean;\n    readonly messages: ReadonlyArray<Record<string, any>>;\n    readonly error?: Record<string, any>;\n}\n\nconst initialState: IState = {\n    wsConnected: false,\n    messages: []\n};\n\nexport const wsReducer = (state = initialState, action: TWsActions ): IState => {\n    switch (action.type) {\n        case WS_CONNECTION_SUCCESS:\n            return {\n                ...state,\n                error: undefined,\n                wsConnected: true\n            };\n        case WS_CONNECTION_ERROR:\n            return {\n                ...state,\n                error: action.payload,\n                wsConnected: false\n            };\n        case WS_CONNECTION_CLOSED:\n            return {\n                ...state,\n                error: undefined,\n                wsConnected: false\n            };\n        case WS_GET_MESSAGE:\n            return {\n                ...state,\n                error: undefined,\n                messages: [...state.messages, action.payload]\n            };\n        default:\n            return state;\n    }\n};","import thunk from 'redux-thunk';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { Action, ActionCreator, Dispatch } from 'redux';\r\n\r\nimport { combineReducers, applyMiddleware, createStore } from 'redux';\r\nimport { cartReducer } from './cart';\r\nimport { ingredientsReducer } from './ingredients';\r\nimport { modalsReducer } from './modals';\r\nimport { ingredientDetailsReducer } from './ingredient-details';\r\nimport { orderDetailsReducer } from './order-details';\r\nimport { forgotPasswordReducer } from './forgot-password';\r\nimport { userReducer } from './user';\r\nimport { wsReducer } from './socket';\r\nimport { socketMiddleware } from '../middlewares/socketMiddleware';\r\n// TS types for Redux extension\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\n\r\nimport { TCartActions } from '../actions/cart';\r\nimport { TForgotPasswordActions } from '../actions/forgot-password';\r\nimport { TIngredientsActions } from '../actions/ingredients';\r\nimport { TIngredientDetailsActions } from '../actions/ingredient-details';\r\nimport { TModalsActions } from '../actions/modals';\r\nimport { TOrderDetailsActions } from '../actions/order-details';\r\nimport { TWsActions, wsActions } from '../actions/socket';\r\nimport { TUserActions } from '../actions/user';\r\nimport { TAuthActions } from '../actions/auth/index';\r\n\r\nimport logger from 'redux-logger';\r\n\r\nconst enhancer = composeWithDevTools(applyMiddleware(logger, thunk, socketMiddleware(wsActions)));\r\n\r\nconst rootReducer = combineReducers({\r\n  ingredients: ingredientsReducer,\r\n  modals: modalsReducer,\r\n  ingredientDetails: ingredientDetailsReducer,\r\n  orderDetails: orderDetailsReducer,\r\n  cart: cartReducer,\r\n  forgotPassword: forgotPasswordReducer,\r\n  user: userReducer,\r\n  ws: wsReducer,\r\n})\r\n\r\nexport const store = createStore(rootReducer, enhancer);\r\nexport type RootState = ReturnType<typeof rootReducer>\r\n\r\nexport type TApplicationActions = \r\n  TCartActions | \r\n  TForgotPasswordActions | \r\n  TIngredientsActions |\r\n  TIngredientDetailsActions |\r\n  TModalsActions |\r\n  TOrderDetailsActions |\r\n  TWsActions |\r\n  TUserActions |\r\n  TAuthActions;\r\n\r\n// Typed thunks\r\nexport type AppThunk<TReturn = void> = ActionCreator<\r\n  ThunkAction<TReturn, Action, RootState, TApplicationActions>\r\n>;\r\n\r\n// Typed dispatch\r\nexport type AppDispatch = Dispatch<TApplicationActions>","import { Middleware, MiddlewareAPI } from \"redux\";\nimport { TWsActions, TWsFunctions } from \"../actions/socket\";\nimport { AppDispatch, RootState } from \"../reducers/index\";\n\nexport const socketMiddleware = (wsActions: TWsFunctions): Middleware => {\n    return ( (store: MiddlewareAPI<AppDispatch, RootState>) => {\n        let socket: WebSocket | null = null;\n\n        return next => (action: TWsActions) => {\n            const { dispatch } = store;\n\n            const { wsInit, wsSendMessage, onOpen, onClose, onError, onMessage } = wsActions;\n\n\n            if (action.type === wsInit && action.wsUrl !== undefined) {\n                socket = new WebSocket(action.wsUrl);\n            }\n\n            if (socket) {\n                socket.onopen = event => {\n                    dispatch({ type: onOpen, payload: event });\n                };\n\n                socket.onerror = event => {\n                    dispatch({ type: onError, payload: event });\n                };\n\n                socket.onmessage = event => {\n                    const { data } = event;\n                    dispatch({ type: onMessage, payload: data });\n                };\n\n                socket.onclose = event => {\n                    dispatch({ type: onClose, payload: event });\n                };\n\n                if (action.type === wsSendMessage) {\n                    const message = action.payload;\n                    socket.send(JSON.stringify(message));\n                }\n            }\n\n            next(action);\n        };\n    } ) as Middleware\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/app/app';\nimport { Provider } from 'react-redux';\nimport { store } from './services/reducers';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"profile_main__oGT78\",\"nav\":\"profile_nav__3iado\",\"navChild\":\"profile_navChild__3idbP\",\"navParagraph\":\"profile_navParagraph__1_jKt\",\"activeLink\":\"profile_activeLink__1U0lF\",\"form\":\"profile_form__2tNte\",\"formChild\":\"profile_formChild__1J3LJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"profile-orders_main__2ZClL\",\"left\":\"profile-orders_left__1KDs_\",\"right\":\"profile-orders_right__IFHgx\",\"nav\":\"profile-orders_nav__2gwdO\",\"navChild\":\"profile-orders_navChild__mhzXA\",\"navParagraph\":\"profile-orders_navParagraph__3QbMj\",\"activeLink\":\"profile-orders_activeLink__2khmv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"order-element_main__24UEc\",\"content\":\"order-element_content__3LBzv\",\"row\":\"order-element_row__2ws1q\",\"icons\":\"order-element_icons__l7zz7\",\"ing\":\"order-element_ing__2VtVx\",\"iconNumber\":\"order-element_iconNumber__3NNHu\",\"ingIcons\":\"order-element_ingIcons__l4v8j\",\"value\":\"order-element_value__zC6kp\",\"statusDone\":\"order-element_statusDone__Wkkzb\",\"statusCancelled\":\"order-element_statusCancelled__3wyDy\",\"statusInProcess\":\"order-element_statusInProcess__thHQI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"feed_main__2ol7x\",\"left\":\"feed_left__3wVh1\",\"right\":\"feed_right__E721i\",\"orders\":\"feed_orders__3yrtM\",\"feedHeading\":\"feed_feedHeading__1tk2R\",\"stats\":\"feed_stats__2Aq3N\",\"ordersStats\":\"feed_ordersStats__3BoSo\",\"ordersReady\":\"feed_ordersReady__1ykCe\",\"ordersPrep\":\"feed_ordersPrep__3pSmm\",\"ordersAllTime\":\"feed_ordersAllTime__3hyol\",\"ordersAllTimeNumber\":\"feed_ordersAllTimeNumber__1Yv1b\",\"ordersToday\":\"feed_ordersToday__5v4x5\",\"ordersTodayNumber\":\"feed_ordersTodayNumber__1aa20\",\"ordersDone\":\"feed_ordersDone__3wZs2\",\"wrapper\":\"feed_wrapper__7xKPn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"burger-constructor_main__3KXdU\",\"constructor\":\"burger-constructor_constructor__IvB1z\",\"middle\":\"burger-constructor_middle__1iDXk\",\"middleIngredients\":\"burger-constructor_middleIngredients__7O5b9\",\"dragIcon\":\"burger-constructor_dragIcon__11cWl\",\"orderSection\":\"burger-constructor_orderSection__3syKX\",\"price\":\"burger-constructor_price___Wnow\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"burger-ingredients_main__2oe95\",\"ingredientsTypeBar\":\"burger-ingredients_ingredientsTypeBar__rhkYD\",\"ingredientsTabs\":\"burger-ingredients_ingredientsTabs__13Uf9\",\"ingredientsTabsElement\":\"burger-ingredients_ingredientsTabsElement__3hcRI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"register_main__1gWGj\",\"form\":\"register_form__1oY_e\",\"formChild\":\"register_formChild__IA-MX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"ingredient-details_card__3N5us\",\"order\":\"ingredient-details_order__3ot29\",\"info\":\"ingredient-details_info__aSogH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"login_main__D0G6T\",\"form\":\"login_form__b66Ct\",\"formChild\":\"login_formChild__3HfPa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"reset-password_main__mW9Mj\",\"form\":\"reset-password_form__2tSd4\",\"formChild\":\"reset-password_formChild__3FpLF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ordersAllTime\":\"feed-order-numbers-overall_ordersAllTime__2TWF7\",\"ordersAllTimeNumber\":\"feed-order-numbers-overall_ordersAllTimeNumber__1UM2u\",\"ordersToday\":\"feed-order-numbers-overall_ordersToday__2xh4E\",\"ordersTodayNumber\":\"feed-order-numbers-overall_ordersTodayNumber__29zfh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"feed-order-numbers_wrapper__2kAlG\",\"ordersReady\":\"feed-order-numbers_ordersReady__1SaO_\",\"ordersPrep\":\"feed-order-numbers_ordersPrep__1I4MY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"order-details_card__3gLqv\",\"icon\":\"order-details_icon__3fBCQ\",\"order\":\"order-details_order__FlpZV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"forgot-password_main__1HCzu\",\"form\":\"forgot-password_form__1-YyM\",\"formChild\":\"forgot-password_formChild__3CXmB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"burger-ingredients-card_card__10tVf\",\"price\":\"burger-ingredients-card_price__3VBAC\",\"center\":\"burger-ingredients-card_center__2nqGD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"loader_main__FLXAs\",\"loader\":\"loader_loader__2d6FG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__2bhYs\",\"modalCloseIcon\":\"modal_modalCloseIcon__1GWLO\"};"],"sourceRoot":""}